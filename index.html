<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suicide Prevention and Crisis Action Plan Template</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&family=Encode+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Open Sans', Arial, sans-serif;
            line-height: 1.6;
            padding: 40px;
            max-width: 1200px;
            margin: 0 auto;
            background: #f5f5f5;
            scroll-behavior: smooth;
        }
        
        .container {
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #4b2e83;
            padding-bottom: 20px;
        }
        
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .logo-box {
            width: 300px;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            background-color: #fafafa;
        }
        
        .forefront-logo {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .school-logo-box {
            position: relative;
            background-color: #f5f5f5;
            border: 2px dashed #bdc3c7;
        }
        
        .logo-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .placeholder-content {
            text-align: center;
        }
        
        .btn-upload {
            background-color: #4b2e83;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            margin-top: 10px;
        }
        
        .btn-upload:hover {
            background-color: #3a2366;
        }
        
        .remove-logo-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #e74c3c;
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
            padding: 0;
        }
        
        .remove-logo-btn:hover {
            background-color: #c0392b;
        }
        
        .header p {
            color: #e74c3c;
            font-style: italic;
            margin-bottom: 10px;
        }
        
        h1 {
            font-family: 'Encode Sans', Arial, sans-serif;
            color: #4b2e83;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
        }
        
        h2 {
            font-family: 'Encode Sans', Arial, sans-serif;
            color: #4b2e83;
            font-size: 18px;
            font-weight: 600;
            margin-top: 30px;
            margin-bottom: 15px;
            text-transform: uppercase;
            border-bottom: 2px solid #4b2e83;
            padding-bottom: 5px;
            position: relative;
        }
        
        h3 {
            font-family: 'Encode Sans', Arial, sans-serif;
            color: #4b2e83;
            font-size: 16px;
            font-weight: 600;
            margin-top: 20px;
            margin-bottom: 10px;
            position: relative;
        }
        
        h4 {
            font-family: 'Encode Sans', Arial, sans-serif;
            color: #4b2e83;
            font-weight: 600;
        }
        
        p {
            margin-bottom: 15px;
            text-align: left;
        }
        
        .fillable {
            background-color: #fff9c4;
            padding: 4px 8px;
            border: 1px solid #fbc02d;
            border-radius: 3px;
            min-width: 150px;
            display: inline-block;
        }
        
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        textarea {
            border: 1px solid #bdc3c7;
            padding: 8px;
            border-radius: 4px;
            font-family: inherit;
            font-size: 14px;
            width: 100%;
        }
        
        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        input[type="date"]:focus,
        textarea:focus {
            outline: none;
            border-color: #3498db;
            background-color: #ebf5fb;
        }
        
        /* Change tracking highlight */
        .changed-field {
            position: relative;
            background-color: #fff4e6 !important;
            border-color: #ff9800 !important;
        }
        
        .change-indicator {
            position: absolute;
            right: -25px;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            background-color: #ff9800;
            border-radius: 50%;
            cursor: pointer;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
        }
        
        table th {
            background-color: #4b2e83;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        table td {
            padding: 10px;
            border: 1px solid #ddd;
        }
        
        table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        table input,
        table textarea {
            width: 100%;
            border: 1px solid #bdc3c7;
            padding: 6px;
        }
        
        .add-row-btn {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .add-row-btn:hover {
            background-color: #229954;
        }
        
        .remove-row-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .remove-row-btn:hover {
            background-color: #c0392b;
        }
        
        .instructions {
            background-color: #e8f5e9;
            padding: 15px;
            border-left: 4px solid #4caf50;
            margin-bottom: 20px;
        }
        
        /* Table of Contents Styles */
        .table-of-contents {
            background: linear-gradient(135deg, #4b2e83 0%, #5c3a9e 100%);
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(75, 46, 131, 0.3);
        }
        
        .toc-title {
            color: white;
            font-family: 'Encode Sans', Arial, sans-serif;
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .toc-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .toc-item {
            background: white;
            border-radius: 6px;
            transition: all 0.3s ease;
            border-left: 4px solid #4b2e83;
            overflow: hidden;
        }
        
        .toc-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .toc-main-section {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.2s ease;
        }
        
        .toc-main-section:hover {
            background: #f8f8f8;
        }
        
        .toc-main-left {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }
        
        .toc-link {
            color: #4b2e83;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }
        
        .toc-link:hover {
            color: #3a2366;
        }
        
        .toc-number {
            background: #4b2e83;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 700;
            flex-shrink: 0;
        }
        
        .toc-expand-icon {
            color: #4b2e83;
            font-size: 20px;
            transition: transform 0.3s ease;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .toc-item.expanded .toc-expand-icon {
            transform: rotate(180deg);
        }
        
        .toc-subsections {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: #f9f9f9;
            border-top: 1px solid #e0e0e0;
        }
        
        .toc-item.expanded .toc-subsections {
            max-height: 500px;
        }
        
        .toc-subsection-list {
            padding: 15px 20px 15px 58px;
        }
        
        .toc-subsection-item {
            margin-bottom: 8px;
        }
        
        .toc-subsection-item:last-child {
            margin-bottom: 0;
        }
        
        .toc-subsection-link {
            color: #5a5a5a;
            text-decoration: none;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
            padding: 4px 0;
        }
        
        .toc-subsection-link:hover {
            color: #4b2e83;
            transform: translateX(3px);
        }
        
        .toc-subsection-bullet {
            width: 6px;
            height: 6px;
            background: #b7a57a;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .section {
            margin-bottom: 40px;
            position: relative;
        }
        
        .checkbox-group {
            margin: 10px 0;
        }
        
        .checkbox-group label {
            display: block;
            padding: 5px 0;
        }
        
        ul {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        .action-buttons {
            margin-top: 30px;
            text-align: center;
        }
        
        .btn {
            padding: 12px 30px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .page-break {
            page-break-after: always;
            margin: 40px 0;
            border-bottom: 2px dashed #ccc;
        }
        
        /* Print-specific styles for page numbers */
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                padding: 20px;
            }
            
            /* Page counter in footer */
            @page {
                margin: 0.75in 1in;
                @bottom-right {
                    content: "Page " counter(page);
                    font-family: 'Open Sans', Arial, sans-serif;
                    font-size: 10pt;
                    color: #4b2e83;
                }
            }
            
            /* Hide interactive elements when printing */
            .status-bar,
            .action-buttons,
            .add-row-btn,
            .remove-row-btn,
            .btn-upload,
            .remove-logo-btn {
                display: none !important;
            }
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-content.large {
            max-width: 900px;
        }
        
        .modal-header {
            font-size: 20px;
            font-weight: 600;
            color: #4b2e83;
            margin-bottom: 20px;
        }
        
        .modal-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: #000;
        }
        
        /* Status Bar */
        .status-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: #4b2e83;
            color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 999;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .status-bar-left {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .status-bar-right {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }
        
        .status-saved {
            background-color: #27ae60;
        }
        
        .status-unsaved {
            background-color: #f39c12;
        }
        
        .passkey-display {
            background-color: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
        
        .status-btn {
            background-color: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        }
        
        .status-btn:hover {
            background-color: rgba(255,255,255,0.3);
        }
        
        body.has-status-bar {
            padding-top: 90px;
        }
        
        .notification {
            position: fixed;
            top: 70px;
            right: 20px;
            background-color: #27ae60;
            color: white;
            padding: 15px 20px;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1001;
            display: none;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .notification.error {
            background-color: #e74c3c;
        }
        
        .notification.warning {
            background-color: #f39c12;
        }
        
        .btn-success {
            background-color: #27ae60;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #229954;
        }
        
        .btn-warning {
            background-color: #f39c12;
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #e67e22;
        }
        
        .btn-danger {
            background-color: #e74c3c;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }

        /* Version History Styles */
        .version-item {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
            background-color: #f9f9f9;
        }
        
        .version-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .version-info {
            flex: 1;
        }
        
        .version-number {
            font-weight: bold;
            color: #4b2e83;
            font-size: 16px;
        }
        
        .version-meta {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .version-actions {
            display: flex;
            gap: 5px;
        }
        
        .version-btn {
            padding: 5px 12px;
            font-size: 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .version-btn.restore {
            background-color: #3498db;
            color: white;
        }
        
        .version-btn.view {
            background-color: #95a5a6;
            color: white;
        }
        
        .version-btn.compare {
            background-color: #9b59b6;
            color: white;
        }
        
        /* Change Tracking Styles */
        .changes-list {
            margin-top: 20px;
        }
        
        .change-item {
            padding: 12px;
            border-left: 4px solid #3498db;
            background-color: #f8f9fa;
            margin-bottom: 10px;
            border-radius: 4px;
        }
        
        .change-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .change-user {
            font-weight: bold;
            color: #4b2e83;
        }
        
        .change-time {
            color: #7f8c8d;
        }
        
        .change-detail {
            font-size: 13px;
            color: #2c3e50;
        }
        
        .change-field {
            font-weight: bold;
            color: #e74c3c;
        }
        
        .change-diff {
            margin-top: 8px;
            padding: 8px;
            background-color: white;
            border-radius: 3px;
            font-size: 12px;
        }
        
        .old-value {
            color: #e74c3c;
            text-decoration: line-through;
        }
        
        .new-value {
            color: #27ae60;
            font-weight: bold;
        }
        
        /* User Badge */
        .user-badge {
            background-color: rgba(255,255,255,0.2);
            padding: 5px 12px;
            border-radius: 4px;
            font-size: 13px;
        }

        /* Help Modal Navigation */
        .help-nav-btn {
            background-color: #e0e0e0;
            color: #333;
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }
        
        .help-nav-btn:hover {
            background-color: #c0c0c0;
        }
        
        .help-nav-btn.active {
            background-color: #4b2e83;
            color: white;
        }
        
        .help-step {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                padding: 20px;
            }
            
            .action-buttons {
                display: none;
            }
            
            .add-row-btn, .remove-row-btn {
                display: none;
            }
            
            .status-bar {
                display: none;
            }
            
            body.has-status-bar {
                padding-top: 0;
            }
            
            .btn-upload {
                display: none;
            }
            
            .remove-logo-btn {
                display: none;
            }
            
            .logo-placeholder {
                border: 1px solid #e0e0e0 !important;
            }
            
                display: none;
            }
            
            .change-indicator {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Status Bar -->
    <div class="status-bar">
        <div class="status-bar-left">
            <div>
                <span class="status-indicator status-saved" id="saveIndicator"></span>
                <span id="saveStatus">Saved</span>
            </div>
            <div id="userInfo" style="display: none;">
                <span class="user-badge" id="currentUser"></span>
            </div>
            <div id="passkeyInfo" style="display: none;">
                Passkey: <span class="passkey-display" id="currentPasskey"></span>
            </div>
        </div>
        <div class="status-bar-right">
            <button class="status-btn" onclick="showVersionHistory()">üìú Versions</button>
            <button class="status-btn" onclick="showChangeLog()">üìù Changes</button>
            <button class="status-btn" onclick="exportData()">üì§ Export</button>
            <button class="status-btn" onclick="importData()">üì• Import</button>
            <button class="status-btn" onclick="showManagePasskey()">üîë Passkey</button>
            <button class="status-btn" onclick="clearAllData()">üóëÔ∏è Clear Form</button>
            <button class="status-btn" onclick="showHelp()">‚ùì Help</button>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- Passkey Modal -->
    <div id="passkeyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePasskeyModal()">&times;</span>
            <div class="modal-header">Manage Passkey & User</div>
            <div id="modalBody">
                <p><strong>Set Your Name:</strong></p>
                <input type="text" id="userNameInput" class="modal-input" placeholder="Enter your name (for tracking changes)">
                
                <hr style="margin: 20px 0;">
                
                <p><strong>Collaborative Passkey:</strong></p>
                <input type="text" id="passkeyInput" class="modal-input" placeholder="Enter passkey (8+ characters)">
                <div class="modal-buttons">
                    <button class="btn btn-success" style="flex: 1;" onclick="setPasskey()">Set Passkey</button>
                    <button class="btn btn-warning" style="flex: 1;" onclick="loadPasskey()">Load with Passkey</button>
                </div>
                <hr style="margin: 20px 0;">
                <button class="btn btn-danger" style="width: 100%;" onclick="removePasskey()">Remove Passkey</button>
            </div>
        </div>
    </div>

    <!-- Version History Modal -->
    <div id="versionModal" class="modal">
        <div class="modal-content large">
            <span class="close" onclick="closeVersionModal()">&times;</span>
            <div class="modal-header">Version History</div>
            <div id="versionList"></div>
        </div>
    </div>

    <!-- Change Log Modal -->
    <div id="changeLogModal" class="modal">
        <div class="modal-content large">
            <span class="close" onclick="closeChangeLogModal()">&times;</span>
            <div class="modal-header">Change Log</div>
            <div>
                <label><input type="checkbox" id="filterMyChanges" onchange="renderChangeLog()"> Show only my changes</label>
            </div>
            <div class="changes-list" id="changeLogList"></div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content large" style="max-width: 1000px;">
            <span class="close" onclick="closeHelpModal()">&times;</span>
            <div class="modal-header">üìñ Complete User Guide</div>
            
            <!-- Step Navigation -->
            <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                <button class="help-nav-btn active" onclick="showHelpStep(1)" id="helpNav1">1. Getting Started</button>
                <button class="help-nav-btn" onclick="showHelpStep(2)" id="helpNav2">2. Passkey System</button>
                <button class="help-nav-btn" onclick="showHelpStep(3)" id="helpNav3">3. Editing Form</button>
                <button class="help-nav-btn" onclick="showHelpStep(4)" id="helpNav4">4. Collaboration</button>
                <button class="help-nav-btn" onclick="showHelpStep(5)" id="helpNav5">5. Export/Import</button>
            </div>
            
            <!-- Step 1: Getting Started -->
            <div class="help-step" id="helpStep1" style="display: block;">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="background: linear-gradient(135deg, #4b2e83 0%, #5c3a9e 100%); color: white; padding: 30px; border-radius: 12px; margin-bottom: 20px;">
                        <h2 style="margin: 0; font-size: 24px; color: white;">Welcome to the Crisis Action Plan Tool</h2>
                        <p style="margin: 10px 0 0 0; opacity: 0.9; color: white;">A web-based form for schools to create and maintain crisis plans</p>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 25px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #4b2e83; margin-top: 0;">üìã Step 1: Access the Form</h4>
                    <div style="display: flex; flex-direction: column; gap: 12px; margin-left: 10px;">
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #4b2e83; font-weight: bold;">‚Ä¢</span>
                            <span>Navigate to this webpage in your web browser (Chrome, Firefox, Edge, or Safari recommended)</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #4b2e83; font-weight: bold;">‚Ä¢</span>
                            <span>Bookmark this page for easy access later</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #4b2e83; font-weight: bold;">‚Ä¢</span>
                            <span>All your data is saved locally in your browser ‚Äì no account or login required</span>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 25px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #3498db; margin-top: 0;">üë§ Step 2: Set Your Identity</h4>
                    <div style="display: flex; flex-direction: column; gap: 12px; margin-left: 10px;">
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #3498db; font-weight: bold;">‚Ä¢</span>
                            <span>Click the "üîë Passkey" button in the top status bar</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #3498db; font-weight: bold;">‚Ä¢</span>
                            <span>Enter your name in the "Set Your Name" field so your edits are tracked</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #3498db; font-weight: bold;">‚Ä¢</span>
                            <span>Your name will appear on all changes you make in the Change Log</span>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 25px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #27ae60; margin-top: 0;">üé® Step 3: Personalize Your Plan</h4>
                    <div style="display: flex; flex-direction: column; gap: 12px; margin-left: 10px;">
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #27ae60; font-weight: bold;">‚Ä¢</span>
                            <span>Click the logo placeholder at the top to upload your school's logo</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #27ae60; font-weight: bold;">‚Ä¢</span>
                            <span>Your logo will be saved with your form data and appear when printed</span>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 25px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #9b59b6; margin-top: 0;">üíæ Step 4: Create Version Snapshots</h4>
                    <div style="display: flex; flex-direction: column; gap: 12px; margin-left: 10px;">
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #9b59b6; font-weight: bold;">‚Ä¢</span>
                            <span>Click "üíæ Save Version" to create a snapshot of your current work</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #9b59b6; font-weight: bold;">‚Ä¢</span>
                            <span>Give it a descriptive name like "Draft 1" or "Final Review"</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #9b59b6; font-weight: bold;">‚Ä¢</span>
                            <span>Access all versions by clicking "üìú Versions" in the top bar</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #9b59b6; font-weight: bold;">‚Ä¢</span>
                            <span>You can restore any previous version if needed</span>
                        </div>
                    </div>
                </div>
                
                <div style="background: #e8f5e9; padding: 20px; border-radius: 8px;">
                    <h4 style="color: #2e7d32; margin-top: 0;">üí° Auto-Save Feature</h4>
                    <p style="margin-bottom: 0;">Your progress is automatically saved every time you make a change. Watch the green indicator in the top status bar ‚Äì it shows "Saved" when your data is secure.</p>
                </div>
            </div>
            
            <!-- Step 2: Passkey System -->
            <div class="help-step" id="helpStep2" style="display: none;">
                <h3 style="color: #4b2e83; border-bottom: 2px solid #4b2e83; padding-bottom: 10px;">üîë Understanding the Passkey System</h3>
                
                <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h4 style="margin-top: 0; color: #856404;">‚ö†Ô∏è Important: Local Storage Only</h4>
                    <p style="margin-bottom: 0;">The passkey system stores data <strong>locally in your browser</strong> on your computer. It does <strong>NOT</strong> sync data across different computers or enable real-time collaboration. To share your work with colleagues on different computers, you must use the <strong>Export/Import JSON file system</strong> (see Step 5).</p>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div style="background: #d4edda; padding: 20px; border-radius: 8px;">
                        <h4 style="margin-top: 0; color: #155724;">What Passkeys ARE Good For</h4>
                        <ul style="margin-bottom: 0; padding-left: 20px;">
                            <li>Organizing multiple plans on the same computer</li>
                            <li>Switching between different Crisis Plans</li>
                            <li>Keeping work separate from other browser users</li>
                        </ul>
                    </div>
                    <div style="background: #f8d7da; padding: 20px; border-radius: 8px;">
                        <h4 style="margin-top: 0; color: #721c24;">What Passkeys DON'T Do</h4>
                        <ul style="margin-bottom: 0; padding-left: 20px;">
                            <li>Sync data to the cloud</li>
                            <li>Enable editing on different computers</li>
                            <li>Allow simultaneous collaboration</li>
                        </ul>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 25px; border-radius: 8px; margin: 20px 0;">
                    <h4 style="color: #4b2e83; margin-top: 0;">üìã How to Use Passkeys (Same Computer)</h4>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div style="display: flex; align-items: flex-start; gap: 15px;">
                            <span style="background: #4b2e83; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: bold;">1</span>
                            <div>
                                <strong>Create a Passkey:</strong> Click "üîë Passkey" ‚Üí Enter a unique code (e.g., "Lincoln-HS-2025") ‚Üí Click "Set Passkey"
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 15px;">
                            <span style="background: #4b2e83; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: bold;">2</span>
                            <div>
                                <strong>Your Data is Tagged:</strong> All your form data is now associated with this passkey in your browser
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 15px;">
                            <span style="background: #4b2e83; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: bold;">3</span>
                            <div>
                                <strong>Switch Plans:</strong> Enter a different passkey and click "Load with Passkey" to switch to another plan
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 12px;">
                    <h4 style="margin-top: 0; color: white;">üîÑ How to Collaborate with Others (Different Computers)</h4>
                    <p>To work with colleagues on different computers, use the JSON file sharing method:</p>
                    <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px;">
                        <div><strong>1.</strong> Complete your edits on your computer</div>
                        <div><strong>2.</strong> Click "üì§ Export" to download a JSON file</div>
                        <div><strong>3.</strong> Email the JSON file to your colleague</div>
                        <div><strong>4.</strong> They click "üì• Import" and select the file</div>
                        <div><strong>5.</strong> They make their edits and export back to you</div>
                    </div>
                    <p style="margin-bottom: 0; margin-top: 15px; opacity: 0.9;"><em>See Step 5 (Export/Import) for detailed instructions.</em></p>
                </div>
            </div>
            
            <!-- Step 3: Editing the Form -->
            <div class="help-step" id="helpStep3" style="display: none;">
                <h3 style="color: #4b2e83; border-bottom: 2px solid #4b2e83; padding-bottom: 10px;">‚úèÔ∏è Editing the Form</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 20px 0;">
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                        <h4 style="color: #4b2e83; margin-top: 0;">üìù Text Fields</h4>
                        <p>Yellow highlighted fields are fillable. Click any field and start typing. Your changes save automatically.</p>
                        <div style="background: #fff9c4; border: 1px solid #fbc02d; padding: 8px; border-radius: 4px; margin-top: 10px;">
                            Example fillable field
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                        <h4 style="color: #4b2e83; margin-top: 0;">üìä Tables</h4>
                        <p>Many sections have tables for team members, resources, etc. Use the green "‚ûï Add Row" button to add entries.</p>
                        <button style="background-color: #27ae60; color: white; border: none; padding: 8px 16px; border-radius: 4px; margin-top: 10px;">+ Add Row</button>
                    </div>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                        <h4 style="color: #4b2e83; margin-top: 0;">üóëÔ∏è Remove Rows</h4>
                        <p>Each table row has a red "Remove" button on the right side to delete entries you no longer need.</p>
                        <button style="background-color: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 3px; font-size: 12px; margin-top: 10px;">Remove</button>
                    </div>
                </div>
                
                <div style="background: #e3f2fd; padding: 20px; border-radius: 8px; margin-top: 20px;">
                    <h4 style="color: #1565c0; margin-top: 0;">üìë Navigation Tips</h4>
                    <ul style="margin-bottom: 0; padding-left: 20px;">
                        <li>Use the purple <strong>Table of Contents</strong> to jump to any section</li>
                        <li>Click section headers to expand/collapse subsections</li>
                        <li>Use Ctrl+F (Cmd+F on Mac) to search for specific text</li>
                    </ul>
                </div>
            </div>
            
            <!-- Step 4: Collaboration -->
            <div class="help-step" id="helpStep4" style="display: none;">
                <h3 style="color: #4b2e83; border-bottom: 2px solid #4b2e83; padding-bottom: 10px;">üë• Team Collaboration</h3>
                
                <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h4 style="margin-top: 0; color: #856404;">üìã How Collaboration Works</h4>
                    <p style="margin-bottom: 0;">Since data is stored locally in each person's browser, team collaboration requires <strong>sharing JSON files</strong> via email or shared drives. Each team member must visit <strong>this same website</strong> to import the JSON file and continue editing. This is a "pass the baton" workflow where one person edits at a time.</p>
                </div>
                
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 12px; margin: 20px 0;">
                    <h4 style="margin-top: 0; color: white;">üîÑ Recommended Team Workflow</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 15px; text-align: center; margin-top: 15px;">
                        <div>
                            <div style="font-size: 32px; margin-bottom: 5px;">üë§</div>
                            <strong>User A</strong><br>
                            <small>Creates plan, makes edits</small>
                        </div>
                        <div>
                            <div style="font-size: 32px; margin-bottom: 5px;">üì§</div>
                            <strong>Export</strong><br>
                            <small>Downloads JSON file</small>
                        </div>
                        <div>
                            <div style="font-size: 32px; margin-bottom: 5px;">üìß</div>
                            <strong>Share</strong><br>
                            <small>Emails file + website link</small>
                        </div>
                        <div>
                            <div style="font-size: 32px; margin-bottom: 5px;">üåê</div>
                            <strong>Visit</strong><br>
                            <small>User B opens this website</small>
                        </div>
                        <div>
                            <div style="font-size: 32px; margin-bottom: 5px;">üì•</div>
                            <strong>Import</strong><br>
                            <small>User B imports JSON file</small>
                        </div>
                        <div>
                            <div style="font-size: 32px; margin-bottom: 5px;">‚úèÔ∏è</div>
                            <strong>Edit</strong><br>
                            <small>User B makes changes</small>
                        </div>
                        <div>
                            <div style="font-size: 32px; margin-bottom: 5px;">üîÅ</div>
                            <strong>Repeat</strong><br>
                            <small>Export & share again</small>
                        </div>
                    </div>
                </div>
                
                <div style="background: #e3f2fd; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h4 style="color: #1565c0; margin-top: 0;">üîó Important: Share the Website Link!</h4>
                    <p style="margin-bottom: 0;">When sharing the JSON file with a colleague, also share the link to this website. They need to open this same Crisis Action Plan Tool webpage in their browser, then click "üì• Import" to load the JSON file you sent them.</p>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                        <h4 style="color: #4b2e83; margin-top: 0;">üìú Version History</h4>
                        <p>Click "üìú Versions" to see all saved versions. You can:</p>
                        <ul style="margin-bottom: 0; padding-left: 20px;">
                            <li>View when versions were created</li>
                            <li>See who created each version</li>
                            <li>Restore previous versions</li>
                        </ul>
                    </div>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                        <h4 style="color: #4b2e83; margin-top: 0;">üìù Change Tracking</h4>
                        <p>Click "üìù Changes" to see a detailed log of:</p>
                        <ul style="margin-bottom: 0; padding-left: 20px;">
                            <li>What was changed</li>
                            <li>Who made the change</li>
                            <li>When it was changed</li>
                            <li>Old vs. new values</li>
                        </ul>
                    </div>
                </div>
                
                <div style="background: #e8f5e9; padding: 15px; border-radius: 8px;">
                    <strong style="color: #2e7d32;">üí° Best Practice:</strong> Before sharing your JSON file, click "üíæ Save Version" to create a named snapshot. This makes it easy to track who made which version!
                </div>
            </div>
            
            <!-- Step 5: Export/Import -->
            <div class="help-step" id="helpStep5" style="display: none;">
                <h3 style="color: #4b2e83; border-bottom: 2px solid #4b2e83; padding-bottom: 10px;">üì§ Export & Import with JSON Files</h3>
                
                <div style="background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; padding: 25px; border-radius: 12px; margin: 20px 0;">
                    <h4 style="color: white; margin-top: 0;">‚≠ê This is the Primary Way to Share & Collaborate!</h4>
                    <p style="margin-bottom: 0;">JSON files are the only way to share your Crisis Action Plan with colleagues on different computers. Think of it as a complete portable backup that includes all form data, version history, and change logs.</p>
                </div>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #4b2e83; margin-top: 0;">üìÅ What's Inside a JSON File?</h4>
                    <ul style="margin-bottom: 0; padding-left: 20px;">
                        <li>All filled-in form data (text fields, tables, etc.)</li>
                        <li>Your school logo</li>
                        <li>Version history (all saved snapshots)</li>
                        <li>Change log (who changed what and when)</li>
                        <li>Timestamp of when it was exported</li>
                    </ul>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div style="background: #e3f2fd; padding: 25px; border-radius: 8px;">
                        <h4 style="color: #1565c0; margin-top: 0;">üì§ How to Export</h4>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <span style="background: #1565c0; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 12px;">1</span>
                                <span>Click "üì§ Export" in the top status bar</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <span style="background: #1565c0; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 12px;">2</span>
                                <span>A .json file automatically downloads</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <span style="background: #1565c0; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 12px;">3</span>
                                <span>Find it in your Downloads folder</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <span style="background: #1565c0; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 12px;">4</span>
                                <span>Email or share via Google Drive, OneDrive, etc.</span>
                            </div>
                        </div>
                    </div>
                    <div style="background: #e8f5e9; padding: 25px; border-radius: 8px;">
                        <h4 style="color: #2e7d32; margin-top: 0;">üì• How to Import</h4>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <span style="background: #2e7d32; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 12px;">1</span>
                                <span>Save the JSON file someone sent you</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <span style="background: #2e7d32; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 12px;">2</span>
                                <span>Click "üì• Import" in the top status bar</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <span style="background: #2e7d32; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 12px;">3</span>
                                <span>Select the .json file from your computer</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <span style="background: #2e7d32; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 12px;">4</span>
                                <span>All data loads instantly ‚Äì you're ready to edit!</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 20px;">
                    <h4 style="color: #4b2e83; margin-top: 0;">üìã Example Team Workflow</h4>
                    <ol style="margin-bottom: 0; padding-left: 20px;">
                        <li><strong>Counselor A</strong> starts the Crisis Plan, fills in sections 1-3</li>
                        <li><strong>Counselor A</strong> clicks "üíæ Save Version" (names it "Counselor A - Sections 1-3")</li>
                        <li><strong>Counselor A</strong> clicks "üì§ Export" and emails the JSON file to Counselor B</li>
                        <li><strong>Counselor B</strong> clicks "üì• Import" and selects the JSON file</li>
                        <li><strong>Counselor B</strong> fills in sections 4-5, saves a version, and exports</li>
                        <li><strong>Counselor B</strong> emails the updated JSON back to Counselor A</li>
                        <li>Repeat until the plan is complete!</li>
                    </ol>
                </div>
                
                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <strong style="color: #856404;">üí° Pro Tips:</strong>
                    <ul style="margin-bottom: 0; padding-left: 20px; margin-top: 10px;">
                        <li>Always save a version before exporting so your snapshot is included</li>
                        <li>Keep backups of JSON files in case you need to restore older versions</li>
                        <li>Use descriptive filenames like "LincolnHS_CrisisPlan_Jan2025_Final.json"</li>
                    </ul>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;">
                <button class="btn btn-primary" onclick="closeHelpModal()" style="padding: 12px 40px;">Got It!</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <div class="logo-container">
                <div class="logo-box">
                    <img src="https://www.washington.edu/research/wp-content/uploads/2018/06/Forefront-DeptSig-CMYK-Purple.png" alt="UW Forefront Suicide Prevention" class="forefront-logo">
                </div>
                <div class="logo-box school-logo-box">
                    <img id="schoolLogo" src="" alt="School Logo" style="display: none; max-width: 100%; max-height: 100%; object-fit: contain;">
                    <div id="logoPlaceholder" class="logo-placeholder">
                        <div class="placeholder-content">
                            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#bdc3c7" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                <polyline points="21 15 16 10 5 21"></polyline>
                            </svg>
                            <p style="margin-top: 10px; color: #7f8c8d; font-size: 14px;">School Logo</p>
                            <button class="btn-upload" onclick="document.getElementById('logoUpload').click()">Upload Logo</button>
                            <input type="file" id="logoUpload" accept="image/*" style="display: none;" onchange="handleLogoUpload(event)">
                        </div>
                    </div>
                    <button id="removeLogoBtn" class="remove-logo-btn" onclick="removeLogo()" style="display: none;">‚úï</button>
                </div>
            </div>
            <p>Please Do Not Distribute ‚Äì For Reference Purposes Only</p>
            <h1>SUICIDE PREVENTION AND CRISIS ACTION PLAN TEMPLATE</h1>
        </div>
        
        <div class="instructions">
            <strong>INSTRUCTIONS:</strong> This template can be used to create your school-based Suicide Prevention and Crisis Action Plan. Any item that is italicized and highlighted is either a place to insert and adapt your own school information, or a directive to attach a document to the appendix. Please note: The text in this template is designed as a sample, so please edit as it relates to your individual school.
        </div>

        <!-- Table of Contents -->
        <div class="table-of-contents">
            <div class="toc-title">üìë Table of Contents</div>
            <div class="toc-grid">
                <!-- Infrastructure Section -->
                <div class="toc-item" onclick="toggleTocSection(this)">
                    <div class="toc-main-section">
                        <div class="toc-main-left">
                            <a href="#infrastructure" class="toc-link">
                                <span class="toc-number">1</span>
                                <span>Infrastructure</span>
                            </a>
                        </div>
                        <div class="toc-expand-icon">‚ñº</div>
                    </div>
                    <div class="toc-subsections">
                        <div class="toc-subsection-list">
                            <div class="toc-subsection-item">
                                <a href="#faculty-staff" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Faculty and Staff</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#linguistic-support" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Linguistic & Cultural Support</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#crisis-action" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Crisis Action Plan</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#resources" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Resources</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#environmental" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Environmental Scan</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#env-checklist" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Environmental Scan Checklist</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Prevention Section -->
                <div class="toc-item" onclick="toggleTocSection(this)">
                    <div class="toc-main-section">
                        <div class="toc-main-left">
                            <a href="#prevention" class="toc-link">
                                <span class="toc-number">2</span>
                                <span>Prevention - Trainings</span>
                            </a>
                        </div>
                        <div class="toc-expand-icon">‚ñº</div>
                    </div>
                    <div class="toc-subsections">
                        <div class="toc-subsection-list">
                            <div class="toc-subsection-item">
                                <a href="#faculty-trainings" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Faculty and Staff Trainings</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#caregiver-trainings" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Caregiver Trainings</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#student-trainings" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Student Trainings</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#additional-trainings" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Additional Behavioral Health Trainings</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#training-sustainability" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Training Sustainability</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#engagement" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Student Engagement</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Intervention Section -->
                <div class="toc-item" onclick="toggleTocSection(this)">
                    <div class="toc-main-section">
                        <div class="toc-main-left">
                            <a href="#intervention" class="toc-link">
                                <span class="toc-number">3</span>
                                <span>Intervention - Protocol</span>
                            </a>
                        </div>
                        <div class="toc-expand-icon">‚ñº</div>
                    </div>
                    <div class="toc-subsections">
                        <div class="toc-subsection-list">
                            <div class="toc-subsection-item">
                                <a href="#referrals" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Referrals</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#screenings" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Screenings</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#communication" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Communication with Caregivers</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#safety-plans" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Safety Plans</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#documentation" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Documentation</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Re-Entry Section -->
                <div class="toc-item" onclick="toggleTocSection(this)">
                    <div class="toc-main-section">
                        <div class="toc-main-left">
                            <a href="#reentry" class="toc-link">
                                <span class="toc-number">4</span>
                                <span>Re-Entry Protocol</span>
                            </a>
                        </div>
                        <div class="toc-expand-icon">‚ñº</div>
                    </div>
                    <div class="toc-subsections">
                        <div class="toc-subsection-list">
                            <div class="toc-subsection-item">
                                <a href="#reentry-meeting" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Re-Entry Meeting</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#followup-meeting" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Follow-Up Meeting</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Postvention Section -->
                <div class="toc-item" onclick="toggleTocSection(this)">
                    <div class="toc-main-section">
                        <div class="toc-main-left">
                            <a href="#postvention" class="toc-link">
                                <span class="toc-number">5</span>
                                <span>Postvention</span>
                            </a>
                        </div>
                        <div class="toc-expand-icon">‚ñº</div>
                    </div>
                    <div class="toc-subsections">
                        <div class="toc-subsection-list">
                            <div class="toc-subsection-item">
                                <a href="#postvention-infrastructure" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Postvention Infrastructure</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#learning-death" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Learning About Student's Death</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#first-day" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>The First Day</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#after-first" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>After the First Day</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#anniversaries" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Anniversaries, Yearbook, and Graduation</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#post-crisis" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Post-Crisis</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Appendices Section -->
                <div class="toc-item" onclick="toggleTocSection(this)">
                    <div class="toc-main-section">
                        <div class="toc-main-left">
                            <a href="#appendices" class="toc-link">
                                <span class="toc-number">6</span>
                                <span>Appendices</span>
                            </a>
                        </div>
                        <div class="toc-expand-icon">‚ñº</div>
                    </div>
                    <div class="toc-subsections">
                        <div class="toc-subsection-list">
                            <div class="toc-subsection-item">
                                <a href="#appendix-a" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Appendix A - Resource List</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#appendix-b" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Appendix B - Sample Referral Card</span>
                                </a>
                            </div>
                            <div class="toc-subsection-item">
                                <a href="#appendix-c" class="toc-subsection-link">
                                    <span class="toc-subsection-bullet"></span>
                                    <span>Appendix C - Sample Referral Form</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        

        <div class="section" data-section-id="infrastructure" id="infrastructure">
            <h2>
                <input type="text" class="fillable school-name-input" id="schoolNameMain" placeholder="INSERT SCHOOL NAME" style="font-size: 18px; font-weight: bold;" oninput="updateSchoolName(this.value)">'S INFRASTRUCTURE
            </h2>
            
            <h3 id="faculty-staff">FACULTY AND STAFF</h3>
            
            <p><strong>Support with Behavioral Health:</strong> Behavioral health is a key component of overall health, and it is an umbrella term that refers to topics such as mental health and suicidal thoughts or attempts. The following staff have the necessary qualifications to support students with behavioral health concerns. Students, staff, and caregivers can contact these staff members regarding students of concern.</p>
            
            <h4 id="behavioral-health-support">Support Students with Behavioral Health Concerns</h4>
            <table id="behavioralHealthTable">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Job Title</th>
                        <th>Phone Number</th>
                        <th>Email Address</th>
                        <th>Office Number</th>
                        <th>Notes on Qualifications</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" placeholder="Name" data-field-id="bh-1-name"></td>
                        <td><input type="text" placeholder="Job Title" data-field-id="bh-1-title"></td>
                        <td><input type="tel" placeholder="Phone" data-field-id="bh-1-phone"></td>
                        <td><input type="email" placeholder="Email" data-field-id="bh-1-email"></td>
                        <td><input type="text" placeholder="Office #" data-field-id="bh-1-office"></td>
                        <td><textarea rows="2" placeholder="Qualifications" data-field-id="bh-1-qual"></textarea></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn" onclick="addBehavioralHealthRow()">+ Add Row</button>
            
            <h4 style="margin-top: 30px;" id="linguistic-support">Support Individuals with Diverse Linguistic and Cultural Backgrounds</h4>
            <p>The following faculty and staff can support individuals with diverse linguistic and cultural backgrounds. Please note: If there are no faculty or staff in the building that can support students and caregivers with diverse linguistic and cultural backgrounds, please include other resources and/or external support persons who can assist.</p>
            
            <table id="linguisticTable">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Job Title</th>
                        <th>Phone Number</th>
                        <th>Email Address</th>
                        <th>Office Number</th>
                        <th>Notes on Cultural Expertise</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" placeholder="Name" data-field-id="ling-1-name"></td>
                        <td><input type="text" placeholder="Job Title" data-field-id="ling-1-title"></td>
                        <td><input type="tel" placeholder="Phone" data-field-id="ling-1-phone"></td>
                        <td><input type="email" placeholder="Email" data-field-id="ling-1-email"></td>
                        <td><input type="text" placeholder="Office #" data-field-id="ling-1-office"></td>
                        <td><textarea rows="2" placeholder="Languages spoken, cultural expertise" data-field-id="ling-1-expertise"></textarea></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn" onclick="addLinguisticRow()">+ Add Row</button>
        </div>

        <div class="section" data-section-id="crisis-action" id="crisis-action">
            <h2>
                CRISIS ACTION PLAN
                
            </h2>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="crisis-school-name">'s Crisis Action Plan will be updated 
                <input type="text" class="fillable" placeholder="insert frequency" style="width: 200px;" data-field-id="crisis-frequency">. 
                This Crisis Action Plan was last updated in 
                <input type="text" class="fillable" placeholder="MM/YYYY" style="width: 100px;" data-field-id="crisis-last-update">. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="crisis-staff-responsible"> is responsible for updating the Crisis Action Plan.
            </p>
            
            <p>
                The Crisis Action Plan will be stored 
                <input type="text" class="fillable" placeholder="insert specific location" style="width: 300px;" data-field-id="crisis-location"> and 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="crisis-housing-staff"> is responsible for housing the plan. 
                The plan will be disseminated to all faculty and staff 
                <input type="text" class="fillable" placeholder="insert method of distribution" style="width: 300px;" data-field-id="crisis-distribution">. 
                The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="crisis-review-staff"> will review the plan with all faculty and staff 
                <input type="text" class="fillable" placeholder="insert time" style="width: 300px;" data-field-id="crisis-review-time"> and provide an opportunity for questions and discussion.
            </p>
        </div>

        <div class="section" data-section-id="resources" id="resources">
            <h2>
                RESOURCES
                
            </h2>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="resources-school-name"> has compiled a list of national, state, and community-based resources that can assist students and their families with behavioral health concerns. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="resources-staff"> is responsible for reviewing and updating the resource list. 
                The resource list is housed 
                <input type="text" class="fillable" placeholder="insert location" style="width: 300px;" data-field-id="resources-location"> and it will be disseminated to the school community 
                <input type="text" class="fillable" placeholder="insert method of distribution" style="width: 300px;" data-field-id="resources-distribution">. 
                The resource list is included in the appendix.
            </p>
        </div>

        <div class="section" data-section-id="environmental" id="environmental">
            <h2>
                ENVIRONMENTAL SCAN
                
            </h2>
            <p>
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="env-staff"> will conduct an environmental scan of all school buildings to identify and limit access to potentially lethal items and/or spaces. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="env-staff-2"> will conduct the scan 
                <input type="text" class="fillable" placeholder="insert frequency" style="width: 200px;" data-field-id="env-frequency">, and the scan will take place 
                <input type="text" class="fillable" placeholder="insert time(s) of year" style="width: 300px;" data-field-id="env-time">. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="env-staff-3"> will document the results of the scan on the environmental scan checklist. 
                If <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="env-staff-4"> does find something of concern, school leadership will resolve the issue(s) within 
                <input type="text" class="fillable" placeholder="insert timeframe" style="width: 150px;" data-field-id="env-timeframe">.
            </p>
            
            <h4 id="env-checklist">Environmental Scan Checklist</h4>
            <table id="environmentalTable">
                <thead>
                    <tr>
                        <th>Item and/or Space</th>
                        <th>How has it been secured?</th>
                        <th>When was it last checked?</th>
                        <th>Who last checked?</th>
                        <th>Additional Notes</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" value="Meds in nurse's office" data-field-id="env-1-item"></td>
                        <td><input type="text" data-field-id="env-1-secured"></td>
                        <td><input type="date" data-field-id="env-1-date"></td>
                        <td><input type="text" data-field-id="env-1-who"></td>
                        <td><textarea rows="2" data-field-id="env-1-notes"></textarea></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="Rooftop access" data-field-id="env-2-item"></td>
                        <td><input type="text" data-field-id="env-2-secured"></td>
                        <td><input type="date" data-field-id="env-2-date"></td>
                        <td><input type="text" data-field-id="env-2-who"></td>
                        <td><textarea rows="2" data-field-id="env-2-notes"></textarea></td>
                        <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="Cleaning supplies" data-field-id="env-3-item"></td>
                        <td><input type="text" data-field-id="env-3-secured"></td>
                        <td><input type="date" data-field-id="env-3-date"></td>
                        <td><input type="text" data-field-id="env-3-who"></td>
                        <td><textarea rows="2" data-field-id="env-3-notes"></textarea></td>
                        <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="Chemicals in science lab" data-field-id="env-4-item"></td>
                        <td><input type="text" data-field-id="env-4-secured"></td>
                        <td><input type="date" data-field-id="env-4-date"></td>
                        <td><input type="text" data-field-id="env-4-who"></td>
                        <td><textarea rows="2" data-field-id="env-4-notes"></textarea></td>
                        <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn" onclick="addEnvironmentalRow()">+ Add Row</button>
        </div>

        <div class="page-break"></div>
        

        <div class="section" data-section-id="prevention" id="prevention">
            <h2>
                PREVENTION - TRAININGS
                
            </h2>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="prev-school"> will provide regular trainings for faculty and staff, caregivers, and students around suicide prevention and behavioral health. Trainings should be responsive to the cultural and linguistic needs of the school community. Please note: 
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="prev-school-2"> will not offer suicide prevention trainings in the immediate aftermath of a death by suicide in the school community. Appropriate resources will be provided during that time to promote healing.
            </p>
            
            <p>Faculty and staff and caregivers should receive suicide prevention trainings before students. Trainings for students should be offered in-person and in smaller groups and/or in a classroom setting; trainings for students should not be offered virtually or in large groups and/or in an auditorium/assembly setting.</p>
            
            <p>
                Each training for faculty and staff, caregivers, and students will include information about how to refer students of concern to school-based resources. 
                <input type="text" class="fillable" placeholder="Insert practice for referral" style="width: 400px;" data-field-id="prev-referral-practice">.
            </p>
            
            <p>Please utilize the following charts to track the trainings that will be provided to faculty and staff, caregivers, and students for the 
                <input type="text" class="fillable" placeholder="XXXX-XXXX" style="width: 120px;" data-field-id="prev-school-year"> school year.</p>
            
            <h3 id="faculty-trainings">Faculty and Staff Trainings</h3>
            <p>All faculty and staff will receive suicide prevention training 
                <input type="text" class="fillable" placeholder="insert frequency" style="width: 150px;" data-field-id="prev-faculty-freq">. 
                New faculty and staff will receive the training during their first year.</p>
            
            <table id="facultyTrainingTable">
                <thead>
                    <tr>
                        <th>Date of Training</th>
                        <th>Name of Training</th>
                        <th>Method of Delivery</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="date" data-field-id="fac-train-1-date"></td>
                        <td><input type="text" data-field-id="fac-train-1-name"></td>
                        <td><input type="text" placeholder="In-Person or Virtual" data-field-id="fac-train-1-method"></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn" onclick="addFacultyTrainingRow()">+ Add Row</button>
            
            <h3 id="caregiver-trainings">Caregiver Trainings</h3>
            <p>Trainings for caregivers will be provided 
                <input type="text" class="fillable" placeholder="insert frequency" style="width: 150px;" data-field-id="prev-caregiver-freq">.</p>
            
            <table id="caregiverTrainingTable">
                <thead>
                    <tr>
                        <th>Date of Training</th>
                        <th>Name of Training</th>
                        <th>Method of Delivery</th>
                        <th>Marketing of Training</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="date" data-field-id="care-train-1-date"></td>
                        <td><input type="text" data-field-id="care-train-1-name"></td>
                        <td><input type="text" placeholder="In-Person or Virtual" data-field-id="care-train-1-method"></td>
                        <td><input type="text" placeholder="Newsletter, Email, Website" data-field-id="care-train-1-market"></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn" onclick="addCaregiverTrainingRow()">+ Add Row</button>
            
            <h3 id="student-trainings">Student Trainings</h3>
            <p>Trainings for students will be provided 
                <input type="text" class="fillable" placeholder="insert frequency" style="width: 150px;" data-field-id="prev-student-freq">.</p>
            
            <table id="studentTrainingTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Name of Training</th>
                        <th>Type of Facilitator</th>
                        <th>Context of Training</th>
                        <th>Grade Level</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="date" data-field-id="stud-train-1-date"></td>
                        <td><input type="text" data-field-id="stud-train-1-name"></td>
                        <td><input type="text" placeholder="Staff/Faculty or Peer-Led" data-field-id="stud-train-1-fac"></td>
                        <td><input type="text" placeholder="e.g., health class" data-field-id="stud-train-1-context"></td>
                        <td><input type="text" data-field-id="stud-train-1-grade"></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn" onclick="addStudentTrainingRow()">+ Add Row</button>
            
            <h3 id="additional-trainings">Additional Behavioral Health Trainings</h3>
            <p>Below are additional behavioral health trainings that will be offered during the 
                <input type="text" class="fillable" placeholder="XXXX-XXXX" style="width: 120px;" data-field-id="prev-add-year"> school year.</p>
            
            <table id="additionalTrainingTable">
                <thead>
                    <tr>
                        <th>Date of Training</th>
                        <th>Name of Training</th>
                        <th>Audience</th>
                        <th>Method of Delivery</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="date" data-field-id="add-train-1-date"></td>
                        <td><input type="text" data-field-id="add-train-1-name"></td>
                        <td><input type="text" data-field-id="add-train-1-audience"></td>
                        <td><input type="text" placeholder="In-Person or Virtual" data-field-id="add-train-1-method"></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn" onclick="addAdditionalTrainingRow()">+ Add Row</button>
            
            <p style="margin-top: 20px;">Schools can utilize the following resources to understand training requirements and coordinate additional trainings.</p>
            <ul>
                <li><a href="https://doh.wa.gov/public-health-provider-resources/healthcare-professions-and-facilities/suicide-prevention/training-requirements" target="_blank" style="color: #4b2e83;">Washington State Department of Health (DOH)</a></li>
                <li><a href="https://www.pesb.wa.gov/" target="_blank" style="color: #4b2e83;">Washington State Professional Educator Standards Board (PESB)</a></li>
            </ul>
            
            <p><strong>Please note:</strong> It is strongly recommended to use established, evidence-based curriculums and trainings.</p>
            
            <h3 id="training-sustainability">Training Sustainability</h3>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="prev-sust-school"> has established the following sustainability practices to ensure high-quality trainings are consistently offered to faculty and staff, caregivers, and students.
            </p>
            <ul>
                <li><input type="text" class="fillable" placeholder="Insert staff responsible" style="width: 300px;" data-field-id="prev-sust-staff"> is responsible for ensuring suicide prevention trainings occur for faculty and staff, caregivers, and students every year.</li>
                <li><input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="prev-sust-school-2"> will ensure that at least two staff members are trained to deliver and/or oversee the delivery of suicide prevention trainings to faculty and staff, caregivers, and students.</li>
                <li><textarea style="width: 100%; margin-top: 10px;" rows="3" placeholder="Insert additional sustainability practices" data-field-id="prev-sust-practices"></textarea></li>
            </ul>
        </div>

        <div class="section" data-section-id="engagement" id="engagement">
            <h3>
                STUDENT ENGAGEMENT
                
            </h3>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="engage-school"> recognizes that examining student engagement is an important way to monitor behavioral health and identify students who may be struggling and/or at risk of suicide. 
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="engage-school-2"> has established the following method(s) of examining student engagement.
            </p>
            <ul>
                <li><textarea style="width: 100%; margin-bottom: 10px;" rows="2" placeholder="Insert method(s) of examining student engagement" data-field-id="engage-methods"></textarea></li>
                <li><textarea style="width: 100%;" rows="2" placeholder="Insert what steps will be taken if staff identify students of concern" data-field-id="engage-steps"></textarea></li>
            </ul>
        </div>

        <div class="page-break"></div>
        

        <div class="section" data-section-id="intervention" id="intervention">
            <h2>
                INTERVENTION - PROTOCOL
                
            </h2>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="int-school"> has established a protocol to ensure all students of concern are connected to appropriate resources and supports. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="int-staff"> is responsible for maintaining the protocol. 
                The protocol will be disseminated to all faculty and staff 
                <input type="text" class="fillable" placeholder="insert method" style="width: 300px;" data-field-id="int-method">. 
                The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="int-staff-2"> will review the protocol 
                <input type="text" class="fillable" placeholder="insert time" style="width: 250px;" data-field-id="int-time">. 
                The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="int-staff-3"> will also provide an opportunity for questions and discussion.
            </p>
            
            <p>
                Additionally, the <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="int-staff-4"> will instruct faculty and staff on how to use a referral form 
                <input type="text" class="fillable" placeholder="insert time" style="width: 250px;" data-field-id="int-referral-time">. 
                Referral forms are located <input type="text" class="fillable" placeholder="insert location" style="width: 300px;" data-field-id="int-referral-loc">. 
                A copy of the referral form is included in the appendix.
            </p>
            
            <p>Below is a simplified overview of the protocol.</p>
            
            <table>
                <thead>
                    <tr>
                        <th>Referral</th>
                        <th>Screening</th>
                        <th>Communication with Caregivers</th>
                        <th>Safety Plan</th>
                        <th>Documentation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>The staff member, caregiver, or student will submit a referral if they are concerned about themselves or a student.</td>
                        <td>Upon receiving the referral, the <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="int-screen-staff"> will meet with the student to conduct a screening.</td>
                        <td>The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="int-comm-staff"> will reach out to the caregiver(s) to discuss the concern and a treatment plan. The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="int-comm-staff-2"> will share resources, discuss referrals, and hold a conversation about reducing or removing access to potentially lethal items (e.g., firearms, medications).</td>
                        <td>The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="int-safety-staff"> will create a safety plan in collaboration with the student.</td>
                        <td>The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="int-doc-staff"> will document all conversations as well as a plan for follow-up with both the student and caregiver(s).</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section" data-section-id="referrals" id="referrals">
            <h3>
                REFERRALS
                
            </h3>
            <h4>Primary and Alternate Contacts</h4>
            <p>The following staff will handle all internal referrals for students of concern.</p>
            
            <table id="referralContactsTable">
                <thead>
                    <tr>
                        <th>Role</th>
                        <th>Name</th>
                        <th>Job Title</th>
                        <th>Phone Number</th>
                        <th>Email Address</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Primary Contact</strong></td>
                        <td><input type="text" data-field-id="ref-primary-name"></td>
                        <td><input type="text" data-field-id="ref-primary-title"></td>
                        <td><input type="tel" data-field-id="ref-primary-phone"></td>
                        <td><input type="email" data-field-id="ref-primary-email"></td>
                    </tr>
                    <tr>
                        <td><strong>Alternate Contact</strong></td>
                        <td><input type="text" data-field-id="ref-alt-name"></td>
                        <td><input type="text" data-field-id="ref-alt-title"></td>
                        <td><input type="tel" data-field-id="ref-alt-phone"></td>
                        <td><input type="email" data-field-id="ref-alt-email"></td>
                    </tr>
                </tbody>
            </table>
            
            <h4>Making an Internal Referral</h4>
            <p>
                If a faculty or staff member is concerned about a student, they should complete a referral form and submit it to 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="ref-submit-staff"> within 24 hours.
            </p>
            
            <p>
                If a student is concerned about themselves or a peer and has disclosed this to a faculty or staff member, the faculty or staff member should approach the conversation with empathy and compassion. The faculty or staff member should thank the student for seeking help and for voicing their concerns. They should complete a referral form and submit it to 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="ref-submit-staff-2"> 
                <input type="text" class="fillable" placeholder="insert timeframe" style="width: 150px;" data-field-id="ref-timeframe">.
            </p>
            
            <p>
                If a referral occurs after hours, faculty and staff will adhere to the following protocol: 
                <textarea style="width: 100%; margin-top: 5px;" rows="2" placeholder="insert protocol" data-field-id="ref-after-hours"></textarea>
            </p>
            
            <p><strong>Exception:</strong> If a student is actively attempting suicide and/or has stated they have a plan, means, and intent to follow through with the plan, a referral must be submitted immediately. Students at imminent risk of suicide should never be left alone ‚Äì they should always be under the supervision of an adult. The main priority is keeping the student safe and getting them connected to immediate care. In cases of imminent risk, faculty and staff are encouraged to call crisis services, such as 988 or 866-427-4747, for triage and support; 911 should be used judiciously and only in extreme situations.</p>
        </div>

        <div class="section" data-section-id="screenings" id="screenings">
            <h3>
                SCREENINGS
                
            </h3>
            <p>
                Once <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="screen-staff"> has received a referral, they will meet 1:1 with the student 
                <input type="text" class="fillable" placeholder="insert timeframe" style="width: 150px;" data-field-id="screen-timeframe"> to screen the student. 
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="screen-school"> will utilize the 
                <input type="text" class="fillable" placeholder="insert screening tool" style="width: 200px;" data-field-id="screen-tool"> as its screening tool. 
                Based on the results of the screening, the <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="screen-staff-2"> will work with the student and caregiver(s) to ensure the student is connected to appropriate supports.
            </p>
            
            <p>
                The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="screen-staff-3"> is responsible for screening students, and they will initiate screening after receiving a self, peer, staff, or caregiver referral.
            </p>
            
            <p>The screening tool is included in the appendix.</p>
            
            <p><strong>Please note:</strong> It is strongly recommended to use established, evidence-based screening tools. <a href="https://zerosuicide.edc.org/toolkit/identify-screening-and-assessment/screening" target="_blank" style="color: #4b2e83;">Zero Suicide</a> and <a href="https://ospi.k12.wa.us/student-success/health-safety/school-safety-center/mental-social-behavioral-health/youth-suicide-prevention-intervention-postvention" target="_blank" style="color: #4b2e83;">OSPI</a> have a comprehensive list of established, evidence-based screening tools.</p>
            
            <p><strong>Exception:</strong> If a student is actively attempting suicide and/or has stated they have a plan, means, and intent to follow through with the plan, prioritize connecting the student to immediate care. A screening can be completed once the student is stabilized.</p>
        </div>

        <div class="section" data-section-id="communication" id="communication">
            <h3>
                COMMUNICATION WITH CAREGIVERS
                
            </h3>
            <p>
                Whenever there is concern about a student being at risk of suicide, the 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="comm-staff"> is responsible for contacting the caregiver(s) as soon as possible. If there is any level of risk, caregivers should be informed. In cases of abuse and neglect, or for further guidance on communication with caregivers, it is recommended to consult the <a href="https://www.schoolcounselor.org/" target="_blank" style="color: #4b2e83;">American School Counselor Association (ASCA)</a>.
            </p>
            
            <p>
                Prior to reaching out, the <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="comm-staff-2"> will collaborate with the student regarding how to communicate with the caregiver(s) (e.g., does the student want to lead the conversation, does the student want to be in the room, etc.). 
                <textarea style="width: 100%; margin-top: 5px;" rows="2" placeholder="Insert school protocols about communicating with caregivers, confidentiality, etc." data-field-id="comm-protocols"></textarea>
            </p>
            
            <p>Prior to reaching out, it is also important to inform the school leader about any students who are at risk of suicide.</p>
            
            <p>
                The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="comm-staff-3"> will inform the caregiver(s) of the situation (e.g., a staff member noticed multiple risk factors and notified admin; e.g., a peer submitted a referral and the 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="comm-staff-4"> followed up to administer a screening). It is important to share details of the situation (e.g., receipt of referral, outcome of screening, etc.) while protecting anonymity. In collaboration with the student and the caregiver(s), the 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="comm-staff-5"> will create a treatment plan, including referrals to outpatient care and community supports.
            </p>
            
            <p>
                The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="comm-staff-6"> will share a resource guide with the caregiver(s), which includes local behavioral health providers, behavioral health literacy, and warning signs of suicide. The resource guide is included in the appendix. The 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="comm-staff-7"> will also have a conversation with the caregiver(s) on limiting access to lethal means, such as firearms and medications, in the home and monitoring social media use. The 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="comm-staff-8"> will inform the caregiver that a safety plan will be developed in collaboration with the student.
            </p>
            
            <p>
                The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="comm-staff-9"> will follow up with the caregiver 
                <input type="text" class="fillable" placeholder="insert timeframe" style="width: 150px;" data-field-id="comm-followup"> to check in about the plan and assess the need for additional support or referrals.
            </p>
        </div>

        <div class="section" data-section-id="safety-plans" id="safety-plans">
            <h3>
                SAFETY PLANS
                
            </h3>
            <p>
                Safety plans are tools for students in distress that start "within self" and build to seeking help from external resources. 
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="safety-school"> recognizes the benefit of safety planning for suicide prevention. Therefore, safety plans will be created with all students of concern, including students who are referred and screened.
            </p>
            
            <p>
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="safety-staff"> is tasked with ensuring all students of concern have a safety plan. If a student who is referred and screened already has a safety plan, the 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="safety-staff-2"> will review the plan with the student and make any necessary edits. With the student's permission, the safety plan can be shared with relevant faculty and staff.
            </p>
            
            <p>
                Once a safety plan has been created or modified, the <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="safety-staff-3"> will follow up with the student 
                <input type="text" class="fillable" placeholder="insert timeframe" style="width: 150px;" data-field-id="safety-followup"> to check in about the plan and make edits as needed. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="safety-staff-4"> will conduct regular check-ins with the student to review the safety plan.
            </p>
            
            <p>The safety plan template is included in the appendix. [Attach template to appendix. If the school does not have a current safety plan template, refer to <a href="https://forefrontintheschools.org/wp-content/uploads/2022/09/Safety-Plan-FIS_9-20-22.pdf" target="_blank" style="color: #4b2e83;">Forefront/988</a> or <a href="https://www.mysafetyplan.org/" target="_blank" style="color: #4b2e83;">My Safety Plan</a>].</p>
            
            <p><strong>Exception:</strong> If a student is actively attempting suicide and/or has stated they have a plan, means, and intent to follow through with the plan, prioritize connecting the student to immediate care. A safety plan will be created once the student is stabilized.</p>
        </div>

        <div class="section" data-section-id="documentation" id="documentation">
            <h3>
                DOCUMENTATION
                
            </h3>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="doc-school"> will formally document all processes related to interventions for students. In all documentation efforts, 
                <input type="text" class="fillable school-name-input" placeholder="insert school name" data-field-id="doc-school-2"> will prioritize confidentiality.
            </p>
            
            <p>
                <strong>Referrals:</strong> <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="doc-ref-staff"> will store all internal referral forms 
                <input type="text" class="fillable" placeholder="insert method of storage" style="width: 300px;" data-field-id="doc-ref-storage">. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="doc-ref-staff-2"> will track all internal referrals 
                <input type="text" class="fillable" placeholder="insert method of tracking" style="width: 250px;" data-field-id="doc-ref-tracking"> to ensure that proper follow-up is completed. Additionally, tracking internal referrals will help the school understand current behavioral health concerns and implement appropriate prevention efforts.
            </p>
            
            <p>
                <strong>Screening:</strong> <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="doc-screen-staff"> will store all completed screeners 
                <input type="text" class="fillable" placeholder="insert method of storage" style="width: 300px;" data-field-id="doc-screen-storage">. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="doc-screen-staff-2"> will track all screeners 
                <input type="text" class="fillable" placeholder="insert method of tracking" style="width: 250px;" data-field-id="doc-screen-tracking"> and document the following: student's name, date of the screening, who conducted the screening, which screening tool was used, the outcome of the screening, when and who notified the caregiver about the results of the screening, when and who will follow up with the caregiver, and next steps taken (e.g., referrals made to external organization, accommodations made).
            </p>
            
            <p>
                <strong>Communication with Caregivers:</strong> <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="doc-comm-staff"> will document all communications with caregivers 
                <input type="text" class="fillable" placeholder="insert method" style="width: 300px;" data-field-id="doc-comm-method">. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="doc-comm-staff-2"> will record the date of the conversation, a summary of the conversation, and next steps.
            </p>
            
            <p>
                <strong>Safety Plans:</strong> <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="doc-safety-staff"> will store all student safety plans 
                <input type="text" class="fillable" placeholder="insert method of storage" style="width: 300px;" data-field-id="doc-safety-storage">. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="doc-safety-staff-2"> will track all students with safety plans 
                <input type="text" class="fillable" placeholder="insert method of tracking" style="width: 250px;" data-field-id="doc-safety-tracking"> to ensure students have regular check-ins to review their safety plans and assess if any edits are needed.
            </p>
        </div>

        <div class="page-break"></div>
        

        <div class="section" data-section-id="reentry" id="reentry">
            <h2>
                RE-ENTRY PROTOCOL
                
            </h2>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="reentry-school"> is dedicated to supporting students and families following hospitalization, treatment, or leave of absence, and establishing supports to ease the transition. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="reentry-staff"> will be responsible for leading the re-entry process. 
                <input type="text" class="fillable school-name-input" placeholder="insert school name" data-field-id="reentry-school-2"> has established and will follow the following re-entry protocol.
            </p>
            
            <h3>School Learns of Student's Extended Absence</h3>
            <table>
                <thead>
                    <tr>
                        <th style="width: 60%;">Tasks</th>
                        <th style="width: 40%;">Additional Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Staff will share news of student's extended absence with the <input type="text" class="fillable" placeholder="e.g., principal" data-field-id="reentry-notify">.</td>
                        <td><textarea rows="2" data-field-id="reentry-notify-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff will connect with the caregiver(s).</td>
                        <td><textarea rows="2" data-field-id="reentry-caregiver-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff will connect with the student to select faculty and staff for re-entry team.</td>
                        <td><textarea rows="2" data-field-id="reentry-student-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff will schedule a re-entry meeting with the re-entry team.</td>
                        <td><textarea rows="2" placeholder="While it is recommended that re-entry meetings happen before the student transitions back to school, this is not always feasible. Re-entry meetings should be scheduled as close to the student's return date as possible." data-field-id="reentry-meeting-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff will document communications and place them in the student's file.</td>
                        <td><textarea rows="2" placeholder="Document and file in a manner that protects confidentiality." data-field-id="reentry-doc-notes"></textarea></td>
                    </tr>
                </tbody>
            </table>
            
            <h4>After learning of a student's extended absence, consider completing the following steps</h4>
            <table>
                <thead>
                    <tr>
                        <th style="width: 60%;">Tasks</th>
                        <th style="width: 40%;">Additional Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Staff can collect signed ROI(s).</td>
                        <td><textarea rows="2" data-field-id="reentry-roi-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff can request and review discharge summary from inpatient facility.</td>
                        <td><textarea rows="2" data-field-id="reentry-discharge-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff can consult with the student's behavioral health provider.</td>
                        <td><textarea rows="2" data-field-id="reentry-provider-notes"></textarea></td>
                    </tr>
                </tbody>
            </table>
            
            <h3 id="reentry-meeting">Re-Entry Meeting</h3>
            <table>
                <thead>
                    <tr>
                        <th style="width: 60%;">Tasks</th>
                        <th style="width: 40%;">Additional Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Re-entry team will discuss school supports for the student.</td>
                        <td><textarea rows="2" data-field-id="reentry-supports-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Re-entry team will discuss academic accommodations for the student.</td>
                        <td><textarea rows="2" data-field-id="reentry-accom-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Re-entry team will create or review the student's safety plan.</td>
                        <td><textarea rows="2" data-field-id="reentry-safety-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff will discuss ways to limit access to lethal means.</td>
                        <td><textarea rows="2" data-field-id="reentry-means-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Designated staff member will schedule a follow-up meeting with the student.</td>
                        <td><textarea rows="2" data-field-id="reentry-followup-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Re-entry team will share re-entry plan with relevant school staff.</td>
                        <td><textarea rows="2" placeholder="It is important to gain permission from the student and caregiver(s) prior to sharing re-entry plan with individuals outside of the re-entry team." data-field-id="reentry-share-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff will document the plan and place it in the student's file.</td>
                        <td><textarea rows="2" placeholder="Document and file in a manner that protects confidentiality." data-field-id="reentry-doc2-notes"></textarea></td>
                    </tr>
                </tbody>
            </table>
            
            <h4>During the re-entry meeting, consider completing the following steps</h4>
            <table>
                <thead>
                    <tr>
                        <th style="width: 60%;">Tasks</th>
                        <th style="width: 40%;">Additional Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Staff can Initiate or modify an IEP/504 plan.</td>
                        <td><textarea rows="2" data-field-id="reentry-iep-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff can create a plan to address bullying, harassment, and/or discrimination.</td>
                        <td><textarea rows="2" data-field-id="reentry-bully-notes"></textarea></td>
                    </tr>
                </tbody>
            </table>
            
            <h3 id="followup-meeting">Follow-Up Meeting</h3>
            <table>
                <thead>
                    <tr>
                        <th style="width: 60%;">Tasks</th>
                        <th style="width: 40%;">Additional Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Designated staff member will participate in follow-up meeting with student.</td>
                        <td><textarea rows="2" data-field-id="reentry-fu1-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff and student will discuss current supports and/or accommodations.</td>
                        <td><textarea rows="2" placeholder="If applicable, discuss needed modifications." data-field-id="reentry-fu2-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff and student will review the student's safety plan.</td>
                        <td><textarea rows="2" placeholder="If applicable, discuss needed modifications." data-field-id="reentry-fu3-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff will share updates with the re-entry team and relevant faculty and staff.</td>
                        <td><textarea rows="2" placeholder="It is important to gain permission from the student and caregiver(s) prior to sharing re-entry plan with individuals outside of the re-entry team." data-field-id="reentry-fu4-notes"></textarea></td>
                    </tr>
                    <tr>
                        <td>Staff will document communications and re-entry plan and place them in the student's file.</td>
                        <td><textarea rows="2" placeholder="Document and file in a manner that protects confidentiality." data-field-id="reentry-fu5-notes"></textarea></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="page-break"></div>
        

        <div class="section" data-section-id="postvention" id="postvention">
            <h2>
                POSTVENTION
                
            </h2>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert School Name" data-field-id="post-school"> recognizes that a student, faculty or staff member, or alumni dying by suicide is a tragedy that affects the entire school community. 
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="post-school-2"> understands that suicide postvention must be handled in a way that is mindful of suicide contagion and supportive of all community members. 
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="post-school-3"> understands that responding to a death by suicide should be equitable to a response to any death or loss in the school community.
            </p>
            
            <h3 id="postvention-infrastructure">POSTVENTION INFRASTRUCTURE</h3>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="post-infra-school"> has put the following infrastructure into place to ensure the school community is prepared for the postvention process.
            </p>
            
            <h4>School-Based Crisis Team</h4>
            <p>The following school-based crisis team has been established and will convene to oversee postvention efforts.</p>
            
            <table id="crisisTeamTable">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Job Title</th>
                        <th>Phone Number (Work and After-Hours)</th>
                        <th>Email Address</th>
                        <th>Additional Notes</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" data-field-id="crisis-team-1-name"></td>
                        <td><input type="text" data-field-id="crisis-team-1-title"></td>
                        <td><input type="text" data-field-id="crisis-team-1-phone"></td>
                        <td><input type="email" data-field-id="crisis-team-1-email"></td>
                        <td><textarea rows="2" data-field-id="crisis-team-1-notes"></textarea></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn" onclick="addCrisisTeamRow()">+ Add Row</button>
            
            <h4>External Support - Flight Team</h4>
            <p>A flight team, which consists of external individuals, such as staff from neighboring schools and district personnel, can provide stability and support during the postvention process. Please note: The flight team provides guidance and suggestions; they should not take over responsibility for the crisis response and postvention efforts. The following flight team has been established and can be called upon to support the school-based crisis team.</p>
            
            <table id="flightTeamTable">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Job Title</th>
                        <th>Phone Number (Work and After-Hours)</th>
                        <th>Email Address</th>
                        <th>Additional Notes</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" data-field-id="flight-team-1-name"></td>
                        <td><input type="text" data-field-id="flight-team-1-title"></td>
                        <td><input type="text" data-field-id="flight-team-1-phone"></td>
                        <td><input type="email" data-field-id="flight-team-1-email"></td>
                        <td><textarea rows="2" data-field-id="flight-team-1-notes"></textarea></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn" onclick="addFlightTeamRow()">+ Add Row</button>
            
            <h4>Internal Communication</h4>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="post-comm-school"> has established 
                <input type="text" class="fillable" placeholder="insert method of communication" style="width: 250px;" data-field-id="post-comm-method"> to ensure effective and timely communication for all school faculty and staff. If 
                <input type="text" class="fillable school-name-input" placeholder="insert school name" data-field-id="post-comm-school-2"> needs to enter the postvention process, 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="post-comm-staff"> should be contacted at 
                <input type="email" class="fillable" placeholder="email" style="width: 200px;" data-field-id="post-comm-email"> and 
                <input type="tel" class="fillable" placeholder="phone number" style="width: 150px;" data-field-id="post-comm-phone"> immediately to initiate the 
                <input type="text" class="fillable" placeholder="insert method of communication" style="width: 200px;" data-field-id="post-comm-method-2">.
            </p>
            
            <h4>Communication Templates</h4>
            <p>
                Draft templates to communicate the news to the school community and media are included in the appendix. Prior to sending out communication, 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="post-tmpl-staff"> will consult with the family to understand how they wish to have the news shared with the school community (e.g., does the family give permission to call the death a suicide?). It is recommended to personalize the messaging based on the audience.
            </p>
            
            <p>For more information about crafting communications and prioritizing safe messaging, refer to <a href="https://sprc.org/wp-content/uploads/2022/12/AfteraSuicideToolkitforSchools-3.pdf" target="_blank" style="color: #4b2e83;">After a Suicide: A Toolkit for Schools</a>.</p>
            
            <h4>The Media</h4>
            <p>
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="post-media-staff"> will act as the point person for all media-related requests and statements. Any communications to the media should go through the point person, who will use best practices in reporting on suicide. Their contact information is listed below.
            </p>
            
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Job Title</th>
                        <th>Phone Number (Work and After Hours)</th>
                        <th>Email Address</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" data-field-id="post-media-name"></td>
                        <td><input type="text" data-field-id="post-media-title"></td>
                        <td><input type="tel" data-field-id="post-media-phone"></td>
                        <td><input type="email" data-field-id="post-media-email"></td>
                    </tr>
                </tbody>
            </table>
            
            <h4>Resources</h4>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="post-res-school"> has created a postvention resource guide with information about risk and protective factors for suicide, warning signs of suicide, grief, and suicide contagion. The postvention resource guide also includes school-based and community-based resources. This guide can be shared with faculty and staff, caregivers, and students during the postvention process; it is recommended to include these resources when news of the death is shared with faculty and staff and caregivers. The postvention resource guide is included in the appendix.
            </p>
            
            <h4>Faculty and Staff Support</h4>
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="post-fac-school"> recognizes that a loss in the school community affects not only students, but faculty and staff as well. In the event of a death in the school community, 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="post-fac-staff"> will remind faculty and staff of how to connect with the Employee Assistance Program (EAP) if they need additional support. The EAP's contact information is listed below.
            </p>
            
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Job Title</th>
                        <th>Phone Number</th>
                        <th>Email Address</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" data-field-id="post-eap-name"></td>
                        <td><input type="text" data-field-id="post-eap-title"></td>
                        <td><input type="tel" data-field-id="post-eap-phone"></td>
                        <td><input type="email" data-field-id="post-eap-email"></td>
                    </tr>
                </tbody>
            </table>
            
            <p>
                Additionally, <input type="text" class="fillable school-name-input" placeholder="insert school name" data-field-id="post-wellness-school"> has prepared a list of resources for faculty and staff well-being. The list includes information about local behavioral health resources, psychoeducational materials about grief and loss, and information about the EAP.
            </p>
        </div>

        <div class="section" data-section-id="learning-death" id="learning-death">
            <h3>
                LEARNING ABOUT STUDENT'S DEATH
                
            </h3>
            <p>
                Upon receiving news of a student's death, including an unconfirmed rumor, a staff member must immediately contact 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="death-staff">. Contact must be made whether this is during or outside of school hours. The 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="death-staff-2"> will then confirm the accuracy of the information.
            </p>
            
            <p>
                The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="death-staff-3"> will convene the crisis team, who will support with postvention efforts and work to establish a trauma-responsive school setting immediately following a crisis.
            </p>
            
            <p>
                The <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="death-staff-4"> will 
                <input type="text" class="fillable" placeholder="insert method of communication" style="width: 250px;" data-field-id="death-method"> to notify faculty and staff of the news and schedule an all-staff meeting as soon as possible. The all-staff meeting should take place at the end of the day that the news is learned and confirmed, or before school on the following day. In this communication, the 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="death-staff-5"> should also include relevant resources (e.g., postvention resource guide, list of resources for staff well-being) and how to refer students of concern to school-based resources.
            </p>
            
            <p>In preparation for the all-staff meeting, the school leader and crisis team members will complete the following tasks.</p>
            
            <h4>Action Items After Learning About the Student's Death</h4>
            <table>
                <thead>
                    <tr>
                        <th colspan="2">Goal: Notify faculty and staff, caregivers, and neighboring schools, and share appropriate resources</th>
                    </tr>
                    <tr>
                        <th colspan="2">Goal: Prepare for all-staff meeting</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">Review the school and/or district's postvention protocols.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Monitor social media for any inaccurate or exaggerated details of the death.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Establish temporary care station(s) for students.<br>
                        ‚Ä¢ At least two adults should always be in the care station, and at least one adult should have advanced training in suicide prevention.<br>
                        ‚Ä¢ Care stations should include a sign-in/out sheet, information about grief and community-based resources, and self-care resources (e.g., water, tissues, fidget toys).</td>
                    </tr>
                    <tr>
                        <td colspan="2">Remove the deceased student's name from all relevant rosters and automated systems, such as attendance rosters, automated call systems, and automated lunch program payment systems. Please note: It is important to consider suspending automated calls for any surviving siblings or family members.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Send communication to caregivers to share news of the death. Communication should include appropriate resources (e.g., risk and protective factors, warning signs, grief, suicide contagion), and information about how to refer students of concern to school-based resources.<br>
                        ‚Ä¢ Please note: Prior to sending any communications, the crisis team should consult with the family to understand how they want the news to be shared with the community. If the family does not wish to have the death labeled as a suicide, be mindful of sharing resources about suicide.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Draft communication to share news of the death with students.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Notify partner and neighboring schools; notify schools who have students related to the deceased student.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Notify flight team members.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Coordinate potential coverage for faculty and staff.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Cancel any suicide prevention trainings to happen in the near future so the community has time to heal.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section" data-section-id="first-day" id="first-day">
            <h3>
                THE FIRST DAY
                
            </h3>
            <p>
                At the end of the day that the news is learned and confirmed, or before school on the following day, the 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="first-staff"> will facilitate an all-staff meeting and 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="first-staff-2"> will take notes and document staff roles.
            </p>
            
            <p>Below is the agenda for the all-staff meeting.</p>
            
            <h4>Agenda for All Staff Meeting ‚Äì The First Day</h4>
            <table>
                <thead>
                    <tr>
                        <th colspan="2">Goal: Provide clarity, structure, and support to faculty and staff, students, caregivers, and the deceased's family</th>
                    </tr>
                    <tr>
                        <th colspan="2">Goal: Mitigate suicide contagion</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">Share facts about the death and information about the family's needs and preferences for sharing this news with the school community.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Create space for staff to ask questions and express feelings.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Share how to access staff support resources (e.g., EAP, wellness resources). Share how staff can request coverage if they need time for themselves during the school day.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Remind staff that the media point person is responsible for communicating with the media.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Introduce the school-based crisis team and any present flight team members.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Disseminate statement to be read by teachers during <input type="text" class="fillable" placeholder="insert time" style="width: 200px;" data-field-id="first-statement-time">.<br>
                        ‚Ä¢ Please note: Statements should not be read over the intercom system.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Share information about the care station, including its purpose, location, assigned staff members, and projected duration.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Review how to refer students of concern to school-based resources.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Discuss and identify students of concern, such as:<br>
                        ‚Ä¢ Friends, partners, teammates, and/or relatives of the deceased<br>
                        ‚Ä¢ Students who have a history of suicidal thoughts and behaviors<br>
                        ‚Ä¢ Student who are experiencing mental health concerns or going through a difficult time</td>
                    </tr>
                    <tr>
                        <td colspan="2">Assign behavioral health team to check in with students of concern.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Assign a behavioral health team member to follow the deceased student's schedule.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Encourage staff to reach out to school-based crisis team with any additional questions, concerns, or relevant updates.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Share details of the next all-staff meeting which will take place either at the end of the day or before school starts on the following day.</td>
                    </tr>
                </tbody>
            </table>
            
            <p>
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="first-followup-staff"> is responsible for following up with staff members to ensure their roles have been fulfilled and assess if they need additional support.
            </p>
            
            <p>During the next all-staff meeting, the following tasks should be completed.</p>
            
            <h4>Agenda for Next All-Staff Meeting</h4>
            <table>
                <thead>
                    <tr>
                        <th colspan="2">Goal: Review postvention efforts and adapt accordingly</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">Review and adjust the implementation of crisis and postvention efforts.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Address any emerging needs among the student body and/or in the community.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Discuss status and needs of students of concern.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Assign behavioral health team to check in with students of concern.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Share appreciation to helpful colleagues.</td>
                    </tr>
                    <tr>
                        <td colspan="2">Share details of the next all-staff meeting (if applicable/needed).<br>
                        ‚Ä¢ If subsequent all-staff meetings are held, it is recommended to follow a similar agenda.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section" data-section-id="after-first" id="after-first">
            <h3>
                AFTER THE FIRST DAY
                
            </h3>
            <p>
                The school-based crisis team will continue to regularly meet to assess and discuss any emerging needs. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="after-staff"> will continue to monitor and check-in with students who are experiencing heightened levels of distress and/or who are exhibiting warning signs of suicide.
            </p>
            
            <p>School shall return to a normal schedule as quickly as possible. For students who need additional support, accommodations should be discussed on a case-by-case basis and provided in accordance with district policy. It is imperative for schools to consider how the deceased student's absence impacts spaces within the school. School staff will remain attuned to the needs of the community and continue to identify and refer students of concern to school-based resources.</p>
            
            <p>
                When removing items from their locker, dismantling spontaneous, on-site memorials, and rearranging student spaces (e.g., classrooms), the 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="after-removal-staff"> should collaborate with behavioral health staff and communicate clearly and openly with students. The 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="after-removal-staff-2"> is responsible for respectfully removing these items and returning them to the family (if applicable).
            </p>
            
            <p>
                <strong>Funeral:</strong> With the family's permission, <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="after-funeral-staff"> will communicate information about the date, time, and location of the funeral with the school community. Students who are interested in attending the funeral should 
                <input type="text" class="fillable" placeholder="insert protocol" style="width: 300px;" data-field-id="after-funeral-protocol">. Staff members who are interested in attending should communicate with the 
                <input type="text" class="fillable" placeholder="insert staff responsible" data-field-id="after-funeral-staff-2"> to ensure there is proper coverage. On the day of the funeral, it is strongly recommended that behavioral health staff are on-site, both at the funeral and at school.
            </p>
            
            <p>
                <strong>Memorials:</strong> <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="after-mem-school"> recognizes the importance of creating procedures ahead of time to reduce conflict and strong reactions. It is strongly recommended to put all best practices in writing and inform the school community about best practices. The following memorialization procedures follow best practices for minimizing suicide contagion and recognize that postvention efforts need to be handled with care.
            </p>
            
            <p>
                School personnel will monitor on-site, spontaneous memorials (e.g., decorating a locker) and any inappropriate material will be removed immediately. School leadership will communicate with students about how long the spontaneous memorial will remain (e.g., a few days, one week) and inform them what will happen with the items at the site (e.g., items will be respectfully taken down and given to the deceased student's family).
            </p>
            
            <p>
                In the aftermath of a death, <input type="text" class="fillable school-name-input" placeholder="insert school name" data-field-id="after-mem-school-2"> will collaborate with the deceased student's family and students who want to do something in memory of the deceased student. Schools will encourage temporary, living memorials that promote hope and healing. The principal will oversee this process in collaboration with behavioral health staff.
            </p>
            
            <p>Below is an overview of acceptable vs. unacceptable memorials in the aftermath of a death by suicide.</p>
            
            <h4>School Guidelines for Memorials After a Suicide</h4>
            <table>
                <thead>
                    <tr>
                        <th>Acceptable Memorials</th>
                        <th>Unacceptable Memorials</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Buy books for the school library.</td>
                        <td>Wearing apparel (e.g., t-shirts, sweatshirts, armbands) with the deceased student's face.</td>
                    </tr>
                    <tr>
                        <td>Donate to a mental health organization.</td>
                        <td>Holding candlelight vigils.</td>
                    </tr>
                    <tr>
                        <td>Hold fundraiser for a local crisis service center.</td>
                        <td>Dedicating a bench or plaque to the deceased student.</td>
                    </tr>
                    <tr>
                        <td>Host educational event during Mental Health Month or Suicide Prevention Month.</td>
                        <td>Dedicating events (e.g., dance, graduation) to the deceased student.</td>
                    </tr>
                    <tr>
                        <td>Participate in local suicide awareness event.</td>
                        <td>Dedicating rooms or sports venues to the deceased student.</td>
                    </tr>
                    <tr>
                        <td>Students will lead a prevention initiative supervised by staff.</td>
                        <td>Flying the flag at half-mast.</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>Planting trees or gardens.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section" data-section-id="anniversaries" id="anniversaries">
            <h3>
                ANNIVERSARIES, YEARBOOK, AND GRADUATION
                
            </h3>
            <p>
                <strong>Anniversaries:</strong> <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="anniv-school"> will be mindful of anniversaries, such as the anniversary of the death, the deceased student's birthday, the date the student would have graduated, etc. 
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="anniv-school-2"> recognizes that vulnerable students and faculty and staff may need extra support during these times. 
                <input type="text" class="fillable" placeholder="Insert staff responsible" data-field-id="anniv-staff"> will be responsible for keeping track of these important dates and monitoring potential students of concern during these times.
            </p>
            
            <p>
                <strong>Yearbook:</strong> <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="year-school"> recognizes the importance of creating procedures ahead of time to reduce conflict and strong reactions. It is strongly recommended to put all best practices in writing and inform the school community about best practices. 
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="year-school-2"> will treat all deaths equitably ‚Äì do not include some students in the yearbook and exclude others. The yearbook is meant to honor how the student lived, not focus on how they died. Final decisions about what to include in the yearbook should be made by the principal, family, and affected students.
            </p>
            
            <p>
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="year-school-3"> will make decisions that align with recommended best practices:
            </p>
            <ul>
                <li>Keep the tone comforting and positive.</li>
                <li>Avoid sensationalizing and glamorizing the death.</li>
                <li>Limit overall space to avoid creating "tributes."</li>
                <li>Avoid turning the yearbook into a call to action.</li>
            </ul>
            
            <p>
                <strong>Graduation:</strong> <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="grad-school"> recognizes the importance of creating procedures ahead of time to reduce conflict and strong reactions. It is strongly recommended to put all best practices in writing and inform the school community about best practices. 
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="grad-school-2"> understands that it is common to recognize deceased students during graduation, but it is also essential to maintain focus on the class as a whole. 
                <input type="text" class="fillable school-name-input" placeholder="Insert school name" data-field-id="grad-school-3"> will treat all deaths equitably. Final decisions about what to include during the ceremony should be made by the principal, family, and affected students.
            </p>
        </div>

        <div class="section" data-section-id="post-crisis" id="post-crisis">
            <h3>
                POST-CRISIS
                
            </h3>
            <p>It is important to reflect on the successes and challenges of the school and district's responses during the postvention process. The crisis team will implement the following strategies to gather feedback from faculty and staff about the postvention process:</p>
            <ul>
                <li><textarea style="width: 100%; margin-bottom: 10px;" rows="3" placeholder="Insert strategies to gather feedback, e.g., all-staff meetings, informal 1:1 or small group conversations, anonymous surveys, etc." data-field-id="postcrisis-feedback"></textarea></li>
            </ul>
            <p>Once feedback has been collected, the crisis team will convene to review feedback and discuss how to improve the postvention process in the future. The crisis team will also review and update the Crisis Action Plan; input from staff will be considered and incorporated as appropriate.</p>
        </div>

        <div class="page-break"></div>
        

        <!-- Main Appendices Heading -->
        <div class="section" id="appendices">
            <h1 style="font-family: 'Encode Sans', Arial, sans-serif; color: #4b2e83; font-size: 28px; font-weight: 700; margin-bottom: 30px; text-align: center; text-transform: uppercase; border-bottom: 3px solid #4b2e83; padding-bottom: 15px;">
                APPENDICES
            </h1>
        </div>

        <div class="section" data-section-id="appendix-a" id="appendix-a">
            <h2>
                APPENDIX A ‚Äì Resource List
                
            </h2>
            <h3>Behavioral Health Resources</h3>
            <table id="resourceTable">
                <thead>
                    <tr>
                        <th>Name of Provider/Organization</th>
                        <th>Address</th>
                        <th>Phone Number</th>
                        <th>Email Address</th>
                        <th>MOU in Place?</th>
                        <th>Additional Notes</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" data-field-id="res-1-name"></td>
                        <td><textarea rows="2" data-field-id="res-1-address"></textarea></td>
                        <td><input type="tel" data-field-id="res-1-phone"></td>
                        <td><input type="email" data-field-id="res-1-email"></td>
                        <td><input type="text" placeholder="Yes/No" data-field-id="res-1-mou"></td>
                        <td><textarea rows="2" data-field-id="res-1-notes"></textarea></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn" onclick="addResourceRow()">+ Add Row</button>
        </div>

        <div class="page-break"></div>
        

        <div class="section" data-section-id="appendix-b">
            <h2>
                APPENDIX B ‚Äì Sample Referral Card
                
            </h2>
            
            <div style="border: 2px solid #4b2e83; padding: 20px; border-radius: 8px; background: #f9f9f9;">
                <h3 style="margin-top: 0;">SAMPLE REFERRAL FOR HELP CARD</h3>
                
                <p>If you are concerned about a student you can refer them to <input type="text" class="fillable" placeholder="insert school specific support" style="width: 300px;" data-field-id="appb-support">. This template includes the appropriate contact information and guidance on what to say in your referral:</p>
                
                <p style="margin-top: 20px;">
                    <input type="text" class="fillable" placeholder="insert name of school staff member" style="width: 100%;" data-field-id="appb-staff"> can be contacted at:
                </p>
                
                <p>
                    <strong>Email:</strong> <input type="email" class="fillable" placeholder="insert email" style="width: 100%;" data-field-id="appb-email">
                </p>
                
                <p>
                    <strong>Phone Number:</strong> <input type="tel" class="fillable" placeholder="insert phone number" style="width: 100%;" data-field-id="appb-phone">
                </p>
                
                <p style="margin-top: 20px;">
                    <strong>Sample Script:</strong> Hello, I am reaching out to refer <input type="text" class="fillable" placeholder="insert student name" style="width: 200px;" data-field-id="appb-student"> because I am concerned about their mental health. This is why I am concerned: <textarea class="fillable" rows="3" placeholder="insert a few sentences about what led you to feel concerned about this student" style="width: 100%;" data-field-id="appb-concern"></textarea>
                </p>
                
                <p>
                    <em>*Optional line to add*</em> Please feel free to contact me at <input type="text" class="fillable" placeholder="insert your contact information" style="width: 300px;" data-field-id="appb-contact"> for any questions.
                </p>
            </div>
        </div>

        <div class="page-break"></div>
        

        <div class="section" data-section-id="appendix-c">
            <h2>
                APPENDIX C ‚Äì Sample Referral Form
                
            </h2>
            
            <div style="border: 2px solid #4b2e83; padding: 20px; border-radius: 8px; background: #f9f9f9;">
                <h3 style="margin-top: 0;">SAMPLE REFERRAL FORM</h3>
                
                <table style="border: none; box-shadow: none;">
                    <tbody>
                        <tr style="background: transparent;">
                            <td style="border: none; padding: 10px 5px;">
                                <strong>Name of Student:</strong><br>
                                <input type="text" style="width: 100%;" data-field-id="appc-student-name">
                            </td>
                            <td style="border: none; padding: 10px 5px;">
                                <strong>Date:</strong><br>
                                <input type="date" style="width: 100%;" data-field-id="appc-date">
                            </td>
                        </tr>
                        <tr style="background: transparent;">
                            <td style="border: none; padding: 10px 5px;">
                                <strong>DOB:</strong><br>
                                <input type="date" style="width: 100%;" data-field-id="appc-dob">
                            </td>
                            <td style="border: none; padding: 10px 5px;">
                                <strong>Gender:</strong><br>
                                <input type="text" style="width: 100%;" data-field-id="appc-gender">
                            </td>
                        </tr>
                        <tr style="background: transparent;">
                            <td style="border: none; padding: 10px 5px;" colspan="2">
                                <strong>Grade:</strong><br>
                                <input type="text" style="width: 100%;" data-field-id="appc-grade">
                            </td>
                        </tr>
                        <tr style="background: transparent;">
                            <td style="border: none; padding: 10px 5px;" colspan="2">
                                <strong>Parent/Caregiver Name and Phone:</strong><br>
                                <input type="text" style="width: 100%;" data-field-id="appc-parent">
                            </td>
                        </tr>
                        <tr style="background: transparent;">
                            <td style="border: none; padding: 10px 5px;" colspan="2">
                                <strong>Reason for Concern:</strong><br>
                                <textarea rows="4" style="width: 100%;" data-field-id="appc-reason"></textarea>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="action-buttons">
            <button class="btn btn-primary" onclick="window.print()">üñ®Ô∏è Print Form</button>
            <button class="btn btn-success" onclick="createVersion()">üíæ Save Version</button>
            <button class="btn btn-primary" onclick="exportData()">üì§ Export Data</button>
            <button class="btn btn-primary" onclick="importData()">üì• Import Data</button>
        </div>
        
        <p style="text-align: center; margin-top: 20px; font-size: 12px; color: #7f8c8d;">
            Enhanced with Version History & Change Tracking | Updated 01.2025
        </p>
    </div>

    <script>
        // ==========================================
        // CONFIGURATION & GLOBAL VARIABLES
        // ==========================================
        
        const STORAGE_KEY = 'crisis_plan_data';
        const PASSKEY_KEY = 'crisis_plan_passkey';
        const LOGO_KEY = 'crisis_plan_school_logo';
        const USER_KEY = 'crisis_plan_user';
        const VERSIONS_KEY = 'crisis_plan_versions';
        const CHANGES_KEY = 'crisis_plan_changes';
        
        let currentPasskey = null;
        let currentUser = 'Anonymous';
        let saveTimeout = null;
        let isUnsaved = false;
        let previousData = {};

        // ==========================================
        // INITIALIZATION
        // ==========================================
        
        window.addEventListener('load', function() {
            document.body.classList.add('has-status-bar');
            loadUser();
            loadLocalData();
            loadSchoolLogo();
            checkPasskey();
            setupAutoSave();
            updateSaveStatus(true);
            previousData = collectFormData();
        });

        // ==========================================
        // USER MANAGEMENT
        // ==========================================
        
        function loadUser() {
            const savedUser = localStorage.getItem(USER_KEY);
            if (savedUser) {
                currentUser = savedUser;
                document.getElementById('currentUser').textContent = currentUser;
                document.getElementById('userInfo').style.display = 'block';
            } else {
                // Prompt for user name on first use
                setTimeout(() => {
                    showManagePasskey();
                }, 500);
            }
        }

        function setUser() {
            const userName = document.getElementById('userNameInput').value.trim();
            if (userName) {
                currentUser = userName;
                localStorage.setItem(USER_KEY, userName);
                document.getElementById('currentUser').textContent = userName;
                document.getElementById('userInfo').style.display = 'block';
                showNotification('User name set: ' + userName);
            }
        }

        // ==========================================
        // VERSION HISTORY SYSTEM
        // ==========================================
        
        function createVersion() {
            const formData = collectFormData();
            const versions = JSON.parse(localStorage.getItem(VERSIONS_KEY) || '[]');
            
            const version = {
                id: Date.now(),
                number: versions.length + 1,
                timestamp: new Date().toISOString(),
                user: currentUser,
                data: formData,
                description: prompt('Version description (optional):') || 'Auto-saved version'
            };
            
            versions.push(version);
            
            // Keep only last 20 versions
            if (versions.length > 20) {
                versions.shift();
            }
            
            localStorage.setItem(VERSIONS_KEY, JSON.stringify(versions));
            
            if (currentPasskey) {
                syncVersionsToCloud(versions);
            }
            
            showNotification('Version ' + version.number + ' created successfully');
        }

        function showVersionHistory() {
            const versions = JSON.parse(localStorage.getItem(VERSIONS_KEY) || '[]');
            const versionList = document.getElementById('versionList');
            
            if (versions.length === 0) {
                versionList.innerHTML = '<p>No versions saved yet. Click "Save Version" to create your first version.</p>';
            } else {
                versionList.innerHTML = versions.reverse().map(version => `
                    <div class="version-item">
                        <div class="version-header">
                            <div class="version-info">
                                <div class="version-number">Version ${version.number}</div>
                                <div class="version-meta">
                                    ${new Date(version.timestamp).toLocaleString()} by ${version.user}
                                    ${version.description ? '<br>' + version.description : ''}
                                </div>
                            </div>
                            <div class="version-actions">
                                <button class="version-btn restore" onclick="restoreVersion(${version.id})">Restore</button>
                                <button class="version-btn view" onclick="viewVersion(${version.id})">View</button>
                                ${versions.length > 1 ? `<button class="version-btn compare" onclick="compareVersions(${version.id})">Compare</button>` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            document.getElementById('versionModal').style.display = 'block';
        }

        function restoreVersion(versionId) {
            if (confirm('Are you sure you want to restore this version? Current unsaved changes will be lost.')) {
                const versions = JSON.parse(localStorage.getItem(VERSIONS_KEY) || '[]');
                const version = versions.find(v => v.id === versionId);
                
                if (version) {
                    populateForm(version.data);
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(version.data));
                    
                    // Log this as a change
                    logChange('form', 'Restored to Version ' + version.number, '', '', 'Version restored');
                    
                    showNotification('Version ' + version.number + ' restored');
                    closeVersionModal();
                    location.reload();
                }
            }
        }

        function viewVersion(versionId) {
            const versions = JSON.parse(localStorage.getItem(VERSIONS_KEY) || '[]');
            const version = versions.find(v => v.id === versionId);
            
            if (version) {
                // Open in new window or show in modal
                const win = window.open('', '_blank');
                win.document.write('<html><head><title>Version ' + version.number + '</title>');
                win.document.write('<style>body { font-family: Arial; padding: 20px; } pre { background: #f5f5f5; padding: 10px; border-radius: 4px; }</style>');
                win.document.write('</head><body>');
                win.document.write('<h1>Version ' + version.number + '</h1>');
                win.document.write('<p><strong>Created:</strong> ' + new Date(version.timestamp).toLocaleString() + '</p>');
                win.document.write('<p><strong>By:</strong> ' + version.user + '</p>');
                win.document.write('<p><strong>Description:</strong> ' + (version.description || 'N/A') + '</p>');
                win.document.write('<hr>');
                win.document.write('<pre>' + JSON.stringify(version.data, null, 2) + '</pre>');
                win.document.write('</body></html>');
            }
        }

        function compareVersions(versionId) {
            showNotification('Compare feature coming soon!', 'warning');
            // This would show a diff view between two versions
        }

        function closeVersionModal() {
            document.getElementById('versionModal').style.display = 'none';
        }

        function syncVersionsToCloud(versions) {
            const cloudKey = `cloud_versions_${hashPasskey(currentPasskey)}`;
            try {
                localStorage.setItem(cloudKey, JSON.stringify(versions));
            } catch (e) {
                console.error('Error syncing versions to cloud:', e);
            }
        }

        // ==========================================
        // CHANGE TRACKING SYSTEM
        // ==========================================
        
        function logChange(fieldId, fieldName, oldValue, newValue, changeType = 'edit') {
            const changes = JSON.parse(localStorage.getItem(CHANGES_KEY) || '[]');
            
            const change = {
                id: Date.now(),
                timestamp: new Date().toISOString(),
                user: currentUser,
                fieldId: fieldId,
                fieldName: fieldName,
                oldValue: oldValue,
                newValue: newValue,
                changeType: changeType
            };
            
            changes.push(change);
            
            // Keep only last 500 changes
            if (changes.length > 500) {
                changes.splice(0, changes.length - 500);
            }
            
            localStorage.setItem(CHANGES_KEY, JSON.stringify(changes));
            
            if (currentPasskey) {
                syncChangesToCloud(changes);
            }
        }

        function showChangeLog() {
            renderChangeLog();
            document.getElementById('changeLogModal').style.display = 'block';
        }

        function renderChangeLog() {
            const changes = JSON.parse(localStorage.getItem(CHANGES_KEY) || '[]');
            const filterMyChanges = document.getElementById('filterMyChanges').checked;
            const changeLogList = document.getElementById('changeLogList');
            
            let filteredChanges = changes;
            if (filterMyChanges) {
                filteredChanges = changes.filter(c => c.user === currentUser);
            }
            
            if (filteredChanges.length === 0) {
                changeLogList.innerHTML = '<p>No changes recorded yet</p>';
            } else {
                changeLogList.innerHTML = filteredChanges.reverse().map(change => `
                    <div class="change-item">
                        <div class="change-header">
                            <span class="change-user">${change.user}</span>
                            <span class="change-time">${new Date(change.timestamp).toLocaleString()}</span>
                        </div>
                        <div class="change-detail">
                            ${change.changeType === 'edit' ? 'Edited' : change.changeType} 
                            <span class="change-field">${change.fieldName || change.fieldId}</span>
                        </div>
                        ${change.oldValue || change.newValue ? `
                            <div class="change-diff">
                                ${change.oldValue ? `<div class="old-value">Old: ${truncate(change.oldValue, 100)}</div>` : ''}
                                ${change.newValue ? `<div class="new-value">New: ${truncate(change.newValue, 100)}</div>` : ''}
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }
        }

        function truncate(str, length) {
            if (str.length <= length) return str;
            return str.substring(0, length) + '...';
        }

        function closeChangeLogModal() {
            document.getElementById('changeLogModal').style.display = 'none';
        }

        function syncChangesToCloud(changes) {
            const cloudKey = `cloud_changes_${hashPasskey(currentPasskey)}`;
            try {
                localStorage.setItem(cloudKey, JSON.stringify(changes));
            } catch (e) {
                console.error('Error syncing changes to cloud:', e);
            }
        }

        // ==========================================
        // AUTO-SAVE & DATA MANAGEMENT
        // ==========================================
        
        function setupAutoSave() {
            const inputs = document.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                // Auto-save on input for saving data
                input.addEventListener('input', debounceAutoSaveOnly);
                input.addEventListener('change', debounceAutoSaveOnly);
                
                // Track changes only when field loses focus (full word/entry completed)
                input.addEventListener('blur', trackFieldChange);
            });
        }

        function debounceAutoSaveOnly(e) {
            isUnsaved = true;
            updateSaveStatus(false);
            
            if (saveTimeout) {
                clearTimeout(saveTimeout);
            }
            
            saveTimeout = setTimeout(() => {
                saveAllData();
            }, 1000); // Save 1 second after last change
        }

        function trackFieldChange(e) {
            // Track the change when user finishes editing (field loses focus)
            if (e && e.target) {
                const fieldId = e.target.getAttribute('data-field-id') || e.target.id || 'unknown';
                const fieldName = e.target.placeholder || e.target.name || fieldId;
                const newValue = e.target.value;
                
                // Get old value from previousData
                const oldData = previousData.inputs?.[fieldId]?.value || '';
                
                // Only log if value actually changed
                if (oldData !== newValue) {
                    logChange(fieldId, fieldName, oldData, newValue);
                    
                    // Update previousData with new value
                    if (!previousData.inputs) previousData.inputs = {};
                    if (!previousData.inputs[fieldId]) previousData.inputs[fieldId] = {};
                    previousData.inputs[fieldId].value = newValue;
                }
            }
        }

        function saveAllData() {
            const formData = collectFormData();
            
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));
                isUnsaved = false;
                updateSaveStatus(true);
                previousData = formData;
                
                if (currentPasskey) {
                    syncToCloud(formData);
                }
            } catch (e) {
                console.error('Error saving data:', e);
                showNotification('Error saving data', 'error');
            }
        }

        function loadLocalData() {
            try {
                const savedData = localStorage.getItem(STORAGE_KEY);
                if (savedData) {
                    const formData = JSON.parse(savedData);
                    populateForm(formData);
                    showNotification('Previous data loaded');
                }
            } catch (e) {
                console.error('Error loading data:', e);
            }
        }

        function collectFormData() {
            const formData = {
                timestamp: new Date().toISOString(),
                logo: localStorage.getItem(LOGO_KEY) || null,
                inputs: {},
                tables: {}
            };

            const inputs = document.querySelectorAll('input:not([type="button"]):not([type="submit"]):not([type="file"]), textarea, select');
            inputs.forEach((input, index) => {
                const id = input.getAttribute('data-field-id') || input.id || input.name || `field_${index}`;
                formData.inputs[id] = {
                    value: input.value,
                    type: input.type,
                    placeholder: input.placeholder || ''
                };
            });

            const tables = document.querySelectorAll('table[id]');
            tables.forEach(table => {
                const tableData = [];
                const rows = table.querySelectorAll('tbody tr');
                
                rows.forEach(row => {
                    const rowData = [];
                    const cells = row.querySelectorAll('td');
                    
                    cells.forEach(cell => {
                        const input = cell.querySelector('input, textarea');
                        if (input) {
                            rowData.push(input.value);
                        }
                    });
                    
                    if (rowData.length > 0) {
                        tableData.push(rowData);
                    }
                });
                
                formData.tables[table.id] = tableData;
            });

            return formData;
        }

        function populateForm(formData) {
            if (!formData) return;
            
            if (formData.logo) {
                localStorage.setItem(LOGO_KEY, formData.logo);
                displayLogo(formData.logo);
            }
            
            if (formData.inputs) {
                const inputs = document.querySelectorAll('input:not([type="button"]):not([type="submit"]):not([type="file"]), textarea, select');
                inputs.forEach((input, index) => {
                    const id = input.getAttribute('data-field-id') || input.id || input.name || `field_${index}`;
                    if (formData.inputs[id]) {
                        input.value = formData.inputs[id].value || '';
                    }
                });
            }

            if (formData.tables) {
                Object.keys(formData.tables).forEach(tableId => {
                    const table = document.getElementById(tableId);
                    if (table && formData.tables[tableId].length > 0) {
                        const tbody = table.querySelector('tbody');
                        if (!tbody) return;
                        
                        tbody.innerHTML = '';
                        
                        const functionMap = {
                            'behavioralHealthTable': addBehavioralHealthRow,
                            'linguisticTable': addLinguisticRow,
                            'environmentalTable': addEnvironmentalRow,
                            'facultyTrainingTable': addFacultyTrainingRow,
                            'caregiverTrainingTable': addCaregiverTrainingRow,
                            'studentTrainingTable': addStudentTrainingRow,
                            'additionalTrainingTable': addAdditionalTrainingRow,
                            'crisisTeamTable': addCrisisTeamRow,
                            'flightTeamTable': addFlightTeamRow,
                            'resourceTable': addResourceRow
                        };
                        
                        const addFunc = functionMap[tableId];
                        if (addFunc) {
                            formData.tables[tableId].forEach(rowData => {
                                addFunc();
                                
                                const lastRow = tbody.lastElementChild;
                                if (lastRow) {
                                    const inputs = lastRow.querySelectorAll('input, textarea');
                                    
                                    inputs.forEach((input, index) => {
                                        if (rowData[index] !== undefined) {
                                            input.value = rowData[index];
                                        }
                                    });
                                }
                            });
                        }
                    }
                });
            }
        }

        // ==========================================
        // PASSKEY & CLOUD SYNC
        // ==========================================
        
        function checkPasskey() {
            const savedPasskey = localStorage.getItem(PASSKEY_KEY);
            if (savedPasskey) {
                currentPasskey = savedPasskey;
                document.getElementById('currentPasskey').textContent = maskPasskey(savedPasskey);
                document.getElementById('passkeyInfo').style.display = 'block';
            }
        }

        function showManagePasskey() {
            const savedUser = localStorage.getItem(USER_KEY);
            if (savedUser) {
                document.getElementById('userNameInput').value = savedUser;
            }
            document.getElementById('passkeyModal').style.display = 'block';
        }

        function closePasskeyModal() {
            document.getElementById('passkeyModal').style.display = 'none';
            document.getElementById('passkeyInput').value = '';
        }

        function setPasskey() {
            setUser(); // Save user name first
            
            const passkey = document.getElementById('passkeyInput').value.trim();
            
            if (passkey.length < 8) {
                showNotification('Passkey must be at least 8 characters', 'error');
                return;
            }

            currentPasskey = passkey;
            localStorage.setItem(PASSKEY_KEY, passkey);
            
            document.getElementById('currentPasskey').textContent = maskPasskey(passkey);
            document.getElementById('passkeyInfo').style.display = 'block';
            
            const formData = collectFormData();
            syncToCloud(formData);
            
            closePasskeyModal();
            showNotification('Passkey set successfully! Data synced to cloud.');
        }

        function loadPasskey() {
            setUser(); // Save user name first
            
            const passkey = document.getElementById('passkeyInput').value.trim();
            
            if (passkey.length < 8) {
                showNotification('Please enter a valid passkey', 'error');
                return;
            }

            currentPasskey = passkey;
            localStorage.setItem(PASSKEY_KEY, passkey);
            
            document.getElementById('currentPasskey').textContent = maskPasskey(passkey);
            document.getElementById('passkeyInfo').style.display = 'block';
            
            loadFromCloud(passkey);
            
            closePasskeyModal();
        }

        function removePasskey() {
            if (confirm('Are you sure you want to remove the passkey? This will not delete your local data.')) {
                currentPasskey = null;
                localStorage.removeItem(PASSKEY_KEY);
                document.getElementById('passkeyInfo').style.display = 'none';
                closePasskeyModal();
                showNotification('Passkey removed');
            }
        }

        function maskPasskey(passkey) {
            if (passkey.length <= 4) return '****';
            return passkey.substring(0, 2) + '****' + passkey.substring(passkey.length - 2);
        }

        function syncToCloud(formData) {
            const cloudKey = `cloud_${hashPasskey(currentPasskey)}`;
            
            try {
                localStorage.setItem(cloudKey, JSON.stringify({
                    passkey: hashPasskey(currentPasskey),
                    data: formData,
                    lastSync: new Date().toISOString()
                }));
                
                console.log('Data synced to cloud (simulated)');
            } catch (e) {
                console.error('Error syncing to cloud:', e);
                showNotification('Error syncing to cloud', 'error');
            }
        }

        function loadFromCloud(passkey) {
            const cloudKey = `cloud_${hashPasskey(passkey)}`;
            
            try {
                const cloudData = localStorage.getItem(cloudKey);
                
                if (cloudData) {
                    const parsed = JSON.parse(cloudData);
                    
                    if (parsed.passkey === hashPasskey(passkey)) {
                        populateForm(parsed.data);
                        localStorage.setItem(STORAGE_KEY, JSON.stringify(parsed.data));
                        
                        // Load versions and changes
                        const versionsKey = `cloud_versions_${hashPasskey(passkey)}`;
                        const changesKey = `cloud_changes_${hashPasskey(passkey)}`;
                        
                        const versions = localStorage.getItem(versionsKey);
                        const changes = localStorage.getItem(changesKey);
                        
                        if (versions) localStorage.setItem(VERSIONS_KEY, versions);
                        if (changes) localStorage.setItem(CHANGES_KEY, changes);
                        
                        showNotification('Data loaded from cloud!');
                    } else {
                        showNotification('Invalid passkey', 'error');
                    }
                } else {
                    showNotification('No data found for this passkey', 'warning');
                }
            } catch (e) {
                console.error('Error loading from cloud:', e);
                showNotification('Error loading from cloud', 'error');
            }
        }

        function hashPasskey(passkey) {
            let hash = 0;
            for (let i = 0; i < passkey.length; i++) {
                const char = passkey.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash.toString(36);
        }

        // ==========================================
        // LOGO MANAGEMENT
        // ==========================================
        
        function handleLogoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                showNotification('Please upload an image file', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const logoData = e.target.result;
                localStorage.setItem(LOGO_KEY, logoData);
                displayLogo(logoData);
                showNotification('School logo uploaded successfully');
                
                if (currentPasskey) {
                    saveAllData();
                }
            };
            reader.readAsDataURL(file);
        }

        function displayLogo(logoData) {
            const logoImg = document.getElementById('schoolLogo');
            const placeholder = document.getElementById('logoPlaceholder');
            const removeBtn = document.getElementById('removeLogoBtn');
            
            logoImg.src = logoData;
            logoImg.style.display = 'block';
            placeholder.style.display = 'none';
            removeBtn.style.display = 'block';
        }

        function removeLogo() {
            if (confirm('Are you sure you want to remove the school logo?')) {
                localStorage.removeItem(LOGO_KEY);
                
                const logoImg = document.getElementById('schoolLogo');
                const placeholder = document.getElementById('logoPlaceholder');
                const removeBtn = document.getElementById('removeLogoBtn');
                
                logoImg.src = '';
                logoImg.style.display = 'none';
                placeholder.style.display = 'flex';
                removeBtn.style.display = 'none';
                
                showNotification('School logo removed');
                
                if (currentPasskey) {
                    saveAllData();
                }
            }
        }

        function loadSchoolLogo() {
            const savedLogo = localStorage.getItem(LOGO_KEY);
            if (savedLogo) {
                displayLogo(savedLogo);
            }
        }

        // ==========================================
        // EXPORT/IMPORT
        // ==========================================
        
        function exportData() {
            const formData = collectFormData();
            const versions = JSON.parse(localStorage.getItem(VERSIONS_KEY) || '[]');
            const changes = JSON.parse(localStorage.getItem(CHANGES_KEY) || '[]');
            
            const exportPackage = {
                formData,
                versions,
                changes,
                exportedAt: new Date().toISOString(),
                exportedBy: currentUser
            };
            
            const dataStr = JSON.stringify(exportPackage, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `crisis_plan_full_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            
            URL.revokeObjectURL(url);
            showNotification('Complete data package exported');
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                
                reader.onload = (event) => {
                    try {
                        const exportPackage = JSON.parse(event.target.result);
                        
                        // Validate the structure
                        if (!exportPackage || typeof exportPackage !== 'object') {
                            throw new Error('Invalid file structure');
                        }
                        
                        // Import all data
                        if (exportPackage.formData) {
                            populateForm(exportPackage.formData);
                            localStorage.setItem(STORAGE_KEY, JSON.stringify(exportPackage.formData));
                        }
                        
                        if (exportPackage.versions) {
                            localStorage.setItem(VERSIONS_KEY, JSON.stringify(exportPackage.versions));
                        }
                        
                        if (exportPackage.changes) {
                            localStorage.setItem(CHANGES_KEY, JSON.stringify(exportPackage.changes));
                        }
                        
                        showNotification('Complete data package imported successfully');
                        
                        // Reload after a brief delay to show the success message
                        setTimeout(() => {
                            location.reload();
                        }, 1000);
                    } catch (err) {
                        console.error('Import error:', err);
                        showNotification('Error importing data: ' + err.message, 'error');
                    }
                };
                
                reader.onerror = () => {
                    showNotification('Error reading file', 'error');
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        // ==========================================
        // UI HELPERS
        // ==========================================
        
        function updateSaveStatus(saved) {
            const indicator = document.getElementById('saveIndicator');
            const status = document.getElementById('saveStatus');
            
            if (saved) {
                indicator.className = 'status-indicator status-saved';
                status.textContent = 'Saved';
            } else {
                indicator.className = 'status-indicator status-unsaved';
                status.textContent = 'Saving...';
            }
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        function showHelp() {
            document.getElementById('helpModal').style.display = 'block';
            // Reset to first step when opening
            showHelpStep(1);
        }

        function closeHelpModal() {
            document.getElementById('helpModal').style.display = 'none';
        }

        function showHelpStep(stepNumber) {
            // Hide all steps
            for (let i = 1; i <= 5; i++) {
                document.getElementById('helpStep' + i).style.display = 'none';
                document.getElementById('helpNav' + i).classList.remove('active');
            }
            // Show selected step
            document.getElementById('helpStep' + stepNumber).style.display = 'block';
            document.getElementById('helpNav' + stepNumber).classList.add('active');
        }

        function clearAllData() {
            if (confirm('‚ö†Ô∏è WARNING: This will permanently delete ALL data including:\n\n‚Ä¢ All form data\n‚Ä¢ Version history\n‚Ä¢ Change logs\n‚Ä¢ Passkey\n‚Ä¢ School logo\n‚Ä¢ User information\n\nThis action cannot be undone!\n\nAre you sure you want to clear everything?')) {
                // Double confirmation for safety
                if (confirm('Are you ABSOLUTELY SURE? All data will be permanently lost.')) {
                    // Clear all input fields, textareas, and selects
                    const inputs = document.querySelectorAll('input:not([type="button"]):not([type="submit"]):not([type="file"]), textarea, select');
                    inputs.forEach(input => {
                        if (input.type === 'checkbox' || input.type === 'radio') {
                            input.checked = false;
                        } else {
                            input.value = '';
                        }
                    });
                    
                    // Clear all dynamic table rows (keep only first row in each table)
                    const tables = document.querySelectorAll('table tbody');
                    tables.forEach(tbody => {
                        const rows = tbody.querySelectorAll('tr');
                        // Remove all rows except the first one
                        for (let i = rows.length - 1; i > 0; i--) {
                            rows[i].remove();
                        }
                        // Clear the first row's inputs
                        if (rows.length > 0) {
                            const firstRowInputs = rows[0].querySelectorAll('input, textarea');
                            firstRowInputs.forEach(input => input.value = '');
                        }
                    });
                    
                    // Clear the school logo
                    removeLogo();
                    
                    // Clear all localStorage keys related to this form
                    localStorage.removeItem(STORAGE_KEY);
                    localStorage.removeItem(PASSKEY_KEY);
                    localStorage.removeItem(LOGO_KEY);
                    localStorage.removeItem(USER_KEY);
                    localStorage.removeItem(VERSIONS_KEY);
                    localStorage.removeItem(CHANGES_KEY);
                    
                    // Clear any cloud-synced data (all keys starting with 'cloud_')
                    const keysToRemove = [];
                    for (let i = 0; i < localStorage.length; i++) {
                        const key = localStorage.key(i);
                        if (key && key.startsWith('cloud_')) {
                            keysToRemove.push(key);
                        }
                    }
                    keysToRemove.forEach(key => localStorage.removeItem(key));
                    
                    showNotification('All data cleared! Reloading...', 'success');
                    
                    // Reload the page after a brief delay to show the notification
                    setTimeout(() => {
                        location.reload();
                    }, 1000);
                }
            }
        }

        window.addEventListener('beforeunload', function(e) {
            if (isUnsaved) {
                e.preventDefault();
                e.returnValue = '';
            }
        });

        // ==========================================
        // TABLE MANAGEMENT (Simplified - only showing 2 tables)
        // ==========================================
        
        function addBehavioralHealthRow() {
            const table = document.getElementById('behavioralHealthTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length + 1;
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="text" placeholder="Name" data-field-id="bh-${rowCount}-name"></td>
                <td><input type="text" placeholder="Job Title" data-field-id="bh-${rowCount}-title"></td>
                <td><input type="tel" placeholder="Phone" data-field-id="bh-${rowCount}-phone"></td>
                <td><input type="email" placeholder="Email" data-field-id="bh-${rowCount}-email"></td>
                <td><input type="text" placeholder="Office #" data-field-id="bh-${rowCount}-office"></td>
                <td><textarea rows="2" placeholder="Qualifications" data-field-id="bh-${rowCount}-qual"></textarea></td>
                <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
            `;
            setupAutoSave();
        }

        function addLinguisticRow() {
            const table = document.getElementById('linguisticTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length + 1;
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="text" placeholder="Name" data-field-id="ling-${rowCount}-name"></td>
                <td><input type="text" placeholder="Job Title" data-field-id="ling-${rowCount}-title"></td>
                <td><input type="tel" placeholder="Phone" data-field-id="ling-${rowCount}-phone"></td>
                <td><input type="email" placeholder="Email" data-field-id="ling-${rowCount}-email"></td>
                <td><input type="text" placeholder="Office #" data-field-id="ling-${rowCount}-office"></td>
                <td><textarea rows="2" placeholder="Languages spoken, cultural expertise" data-field-id="ling-${rowCount}-expertise"></textarea></td>
                <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
            `;
            setupAutoSave();
        }

        function addEnvironmentalRow() {
            const table = document.getElementById('environmentalTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length + 1;
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="text" placeholder="Item/Space" data-field-id="env-${rowCount}-item"></td>
                <td><input type="text" data-field-id="env-${rowCount}-secured"></td>
                <td><input type="date" data-field-id="env-${rowCount}-date"></td>
                <td><input type="text" data-field-id="env-${rowCount}-who"></td>
                <td><textarea rows="2" data-field-id="env-${rowCount}-notes"></textarea></td>
                <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
            `;
            setupAutoSave();
        }

        function addFacultyTrainingRow() {
            const table = document.getElementById('facultyTrainingTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length + 1;
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="date" data-field-id="fac-train-${rowCount}-date"></td>
                <td><input type="text" data-field-id="fac-train-${rowCount}-name"></td>
                <td><input type="text" placeholder="In-Person or Virtual" data-field-id="fac-train-${rowCount}-method"></td>
                <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
            `;
            setupAutoSave();
        }

        function addCaregiverTrainingRow() {
            const table = document.getElementById('caregiverTrainingTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length + 1;
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="date" data-field-id="care-train-${rowCount}-date"></td>
                <td><input type="text" data-field-id="care-train-${rowCount}-name"></td>
                <td><input type="text" placeholder="In-Person or Virtual" data-field-id="care-train-${rowCount}-method"></td>
                <td><input type="text" placeholder="Newsletter, Email, Website" data-field-id="care-train-${rowCount}-market"></td>
                <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
            `;
            setupAutoSave();
        }

        function addStudentTrainingRow() {
            const table = document.getElementById('studentTrainingTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length + 1;
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="date" data-field-id="stud-train-${rowCount}-date"></td>
                <td><input type="text" data-field-id="stud-train-${rowCount}-name"></td>
                <td><input type="text" placeholder="Staff/Faculty or Peer-Led" data-field-id="stud-train-${rowCount}-fac"></td>
                <td><input type="text" placeholder="e.g., health class" data-field-id="stud-train-${rowCount}-context"></td>
                <td><input type="text" data-field-id="stud-train-${rowCount}-grade"></td>
                <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
            `;
            setupAutoSave();
        }

        function addAdditionalTrainingRow() {
            const table = document.getElementById('additionalTrainingTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length + 1;
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="date" data-field-id="add-train-${rowCount}-date"></td>
                <td><input type="text" data-field-id="add-train-${rowCount}-name"></td>
                <td><input type="text" data-field-id="add-train-${rowCount}-audience"></td>
                <td><input type="text" placeholder="In-Person or Virtual" data-field-id="add-train-${rowCount}-method"></td>
                <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
            `;
            setupAutoSave();
        }

        function addCrisisTeamRow() {
            const table = document.getElementById('crisisTeamTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length + 1;
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="text" data-field-id="crisis-team-${rowCount}-name"></td>
                <td><input type="text" data-field-id="crisis-team-${rowCount}-title"></td>
                <td><input type="text" data-field-id="crisis-team-${rowCount}-phone"></td>
                <td><input type="email" data-field-id="crisis-team-${rowCount}-email"></td>
                <td><textarea rows="2" data-field-id="crisis-team-${rowCount}-notes"></textarea></td>
                <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
            `;
            setupAutoSave();
        }

        function addFlightTeamRow() {
            const table = document.getElementById('flightTeamTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length + 1;
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="text" data-field-id="flight-team-${rowCount}-name"></td>
                <td><input type="text" data-field-id="flight-team-${rowCount}-title"></td>
                <td><input type="text" data-field-id="flight-team-${rowCount}-phone"></td>
                <td><input type="email" data-field-id="flight-team-${rowCount}-email"></td>
                <td><textarea rows="2" data-field-id="flight-team-${rowCount}-notes"></textarea></td>
                <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
            `;
            setupAutoSave();
        }

        function addResourceRow() {
            const table = document.getElementById('resourceTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length + 1;
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="text" data-field-id="res-${rowCount}-name"></td>
                <td><textarea rows="2" data-field-id="res-${rowCount}-address"></textarea></td>
                <td><input type="tel" data-field-id="res-${rowCount}-phone"></td>
                <td><input type="email" data-field-id="res-${rowCount}-email"></td>
                <td><input type="text" placeholder="Yes/No" data-field-id="res-${rowCount}-mou"></td>
                <td><textarea rows="2" data-field-id="res-${rowCount}-notes"></textarea></td>
                <td><button class="remove-row-btn" onclick="removeRow(this)">Remove</button></td>
            `;
            setupAutoSave();
        }

        function removeRow(button) {
            const row = button.parentNode.parentNode;
            const table = row.parentNode.parentNode;
            const tableId = table.id;
            const rowIndex = row.rowIndex;
            
            row.parentNode.removeChild(row);
            logChange(tableId, `Table: ${tableId}`, '', '', `Removed row ${rowIndex}`);
            debounceAutoSave();
        }

        function updateSchoolName(name) {
            const schoolNameInputs = document.querySelectorAll('.school-name-input');
            schoolNameInputs.forEach(input => {
                if (input.id !== 'schoolNameMain') {
                    input.value = name;
                }
            });
        }

        // ==========================================
        // TABLE OF CONTENTS TOGGLE
        // ==========================================
        
        function toggleTocSection(element) {
            // Don't toggle if clicking on a link or its children
            if (event.target.tagName === 'A' || event.target.closest('a')) {
                return;
            }
            element.classList.toggle('expanded');
        }
    </script>
</body>
</html>
